{"version":3,"file":"js/637.js","mappings":"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,OAC9BsG,GAGZ,IAOa,IAHb5N,EAAgBmB,yBACZiG,EACA8F,GACFxN,QAEK,GAIP,CACZ,CACJ,GAGAmO,EAAoB,CACpB,KACA,OACA,MACA,OACA,MACA,MACA,aACA,QACA,QACA,MACA,MACA,QACA,QACA,MACA,KACA,UACA,QACA,QACA,IACA,UACA,MACA,IACA,OACA,MACA,MACA,KACA,YACA,aACA,SACA,YACA,WACA,UACA,SACA,UACA,WACA,KACA,QACA,SACA,OACA,IACA,UACA,QACA,KACA,OACA,KACA,SACA,OACA,SACA,OACA,KACA,OACA,QACA,MACA,IACA,SACA,YACA,MACA,OACA,MACA,MACA,KACA,MACA,QACA,SACA,KACA,IACA,MACA,MACA,OACA,OACA,MACA,MACA,UACA,KACA,QACA,QACA,SACA,aACA,UACA,QACA,SACA,WACA,SACA,UACA,WACA,SACA,UACA,UACA,MACA,MACA,SACA,KACA,OACA,IACA,MACA,OACA,MACA,MACA,MACA,MACA,QACA,KACA,MACA,QACA,KACA,QACA,MACA,MACA,QACA,MACA,IACA,KACA,OACA,MACA,QACA,IACA,IACA,UACA,WACA,UACA,uBACA,QACA,UACA,eACA,SACA,UACA,WACA,UACA,SACA,QACA,aACA,WACA,aACA,aACA,UACA,WACA,YACA,WACA,UACA,YACA,UACA,WACA,UACA,QACA,aACA,OACA,YACA,UACA,aACA,UACA,UACA,WACA,aACA,QACA,QACA,OACA,UACA,QACA,SAaAC,EAAqB,CACrB,CACIC,GAAI,WACJ7K,OAAQ,CAAC,YACT8K,WAAW,EACXC,cAAc,GAElB,CACIF,GAAI,cACJ7K,OAAQ,CAAC,eACT8K,WAAW,EACXC,cAAc,GAElB,CACIF,GAAI,mBACJ7K,OAAQ,CAAC,oBACT8K,WAAW,EACXC,cAAc,GAElB,CACIF,GAAI,UACJ7K,OAAQ,CAAC,WACT8K,WAAW,EACXC,cAAc,EACdC,YAAa,CAAEC,OAAQ,EAAGC,MAAO,IACjCC,SAAU,oBAEd,CACIN,GAAI,kBACJ7K,OA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","sources":["webpack://vsekovriki/./node_modules/suggestions-jquery/dist/js/jquery.suggestions.js"],"sourcesContent":["/**\n * DaData.ru Suggestions jQuery plugin, version 22.6.0\n *\n * DaData.ru Suggestions jQuery plugin is freely distributable under the terms of MIT-style license\n * Built on DevBridge Autocomplete for jQuery (https://github.com/devbridge/jQuery-Autocomplete)\n * For details, see https://github.com/hflabs/suggestions-jquery\n */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('jquery')) :\n\ttypeof define === 'function' && define.amd ? define(['jquery'], factory) :\n\t(factory(global.jQuery));\n}(this, (function ($) { 'use strict';\n\n$ = $ && $.hasOwnProperty('default') ? $['default'] : $;\n\n/**\n * Утилиты для работы с типами.\n */\nvar lang_util = {\n    /**\n     * Проверяет, является ли аргумент массивом.\n     */\n    isArray: function(array) {\n        return Array.isArray(array);\n    },\n\n    /**\n     * Проверяет, является ли аргумент функцией.\n     */\n    isFunction: function(it) {\n        return Object.prototype.toString.call(it) === \"[object Function]\";\n    },\n\n    /**\n     * Проверяет, является ли аргумент пустым объектом ({}).\n     */\n    isEmptyObject: function(obj) {\n        return Object.keys(obj).length === 0 && obj.constructor === Object;\n    },\n\n    /**\n     * Проверяет, является ли аргумент «обычным» объектом\n     * (не undefiend, не null, не DOM-элемент)\n     */\n    isPlainObject: function(obj) {\n        if (\n            obj === undefined ||\n            typeof obj !== \"object\" ||\n            obj === null ||\n            obj.nodeType ||\n            obj === obj.window\n        ) {\n            return false;\n        }\n        if (\n            obj.constructor &&\n            !Object.prototype.hasOwnProperty.call(\n                obj.constructor.prototype,\n                \"isPrototypeOf\"\n            )\n        ) {\n            return false;\n        }\n        return true;\n    }\n};\n\n/**\n * Утилиты для работы с коллекциями.\n */\nvar collection_util = {\n    /**\n     * Возвращает массив без пустых элементов\n     */\n    compact: function(array) {\n        return array.filter(function(el) {\n            return !!el;\n        });\n    },\n\n    /**\n     * Итерирует по элементам массива или полям объекта.\n     * Ведёт себя как $.each() - прерывает выполнение, если функция-обработчик возвращает false.\n     * @param {Object|Array} obj - массив или объект\n     * @param {eachCallback} callback - функция-обработчик\n     */\n    each: function(obj, callback) {\n        if (Array.isArray(obj)) {\n            obj.some(function(el, idx) {\n                return callback(el, idx) === false;\n            });\n            return;\n        }\n        Object.keys(obj).some(function(key) {\n            var value = obj[key];\n            return callback(value, key) === false;\n        });\n    },\n\n    /**\n     * Пересечение массивов: ([1,2,3,4], [2,4,5,6]) => [2,4]\n     * Исходные массивы не меняются.\n     */\n    intersect: function(array1, array2) {\n        var result = [];\n        if (!Array.isArray(array1) || !Array.isArray(array2)) {\n            return result;\n        }\n        return array1.filter(function(el) {\n            return array2.indexOf(el) !== -1;\n        });\n    },\n\n    /**\n     * Разность массивов: ([1,2,3,4], [2,4,5,6]) => [1,3]\n     * Исходные массивы не меняются.\n     */\n    minus: function(array1, array2) {\n        if (!array2 || array2.length === 0) {\n            return array1;\n        }\n        return array1.filter(function(el) {\n            return array2.indexOf(el) === -1;\n        });\n    },\n\n    /**\n     * Обрачивает переданный объект в массив.\n     * Если передан массив, возвращает его копию.\n     */\n    makeArray: function(arrayLike) {\n        if (lang_util.isArray(arrayLike)) {\n            return Array.prototype.slice.call(arrayLike);\n        } else {\n            return [arrayLike];\n        }\n    },\n\n    /**\n     * Разность массивов с частичным совпадением элементов.\n     * Если элемент второго массива включает в себя элемент первого,\n     * элементы считаются равными.\n     */\n    minusWithPartialMatching: function(array1, array2) {\n        if (!array2 || array2.length === 0) {\n            return array1;\n        }\n        return array1.filter(function(el) {\n            return !array2.some(function(el2) {\n                return el2.indexOf(el) === 0;\n            });\n        });\n    },\n\n    /**\n     * Копирует массив, начиная с указанного элемента.\n     * @param obj - массив\n     * @param start - индекс, начиная с которого надо скопировать\n     */\n    slice: function(obj, start) {\n        return Array.prototype.slice.call(obj, start);\n    }\n};\n\n/**\n * Утилиты для работы с функциями.\n */\nvar func_util = {\n    /**\n     * Выполняет функцию с указанной задержкой.\n     * @param {Function} handler - функция\n     * @param {number} delay - задержка в миллисекундах\n     */\n    delay: function(handler, delay) {\n        return setTimeout(handler, delay || 0);\n    }\n};\n\n/**\n * Утилиты для работы с объектами.\n */\nvar object_util = {\n    /**\n     * Сравнивает два объекта по полям, которые присутствуют в обоих\n     * @returns {boolean} true, если поля совпадают, false в противном случае\n     */\n    areSame: function self(a, b) {\n        var same = true;\n\n        if (typeof a != typeof b) {\n            return false;\n        }\n\n        if (typeof a == \"object\" && a != null && b != null) {\n            collection_util.each(a, function(value, i) {\n                return (same = self(value, b[i]));\n            });\n            return same;\n        }\n\n        return a === b;\n    },\n\n    /**\n     * Копирует свойства и их значения из исходных объектов в целевой\n     */\n    assign: function(target, varArgs) {\n        if (typeof Object.assign === \"function\") {\n            return Object.assign.apply(null, arguments);\n        }\n        if (target == null) {\n            // TypeError if undefined or null\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n        }\n\n        var to = Object(target);\n\n        for (var index = 1; index < arguments.length; index++) {\n            var nextSource = arguments[index];\n\n            if (nextSource != null) {\n                // Skip over if undefined or null\n                for (var nextKey in nextSource) {\n                    // Avoid bugs when hasOwnProperty is shadowed\n                    if (\n                        Object.prototype.hasOwnProperty.call(\n                            nextSource,\n                            nextKey\n                        )\n                    ) {\n                        to[nextKey] = nextSource[nextKey];\n                    }\n                }\n            }\n        }\n        return to;\n    },\n\n    /**\n     * Клонирует объект глубоким копированием\n     */\n    clone: function(obj) {\n        return JSON.parse(JSON.stringify(obj));\n    },\n\n    /**\n     * Возвращает копию объекта без пустых полей\n     * (без undefined, null и '')\n     * @param obj\n     */\n    compact: function(obj) {\n        var copy = object_util.clone(obj);\n\n        collection_util.each(copy, function(val, key) {\n            if (val === null || val === undefined || val === \"\") {\n                delete copy[key];\n            }\n        });\n\n        return copy;\n    },\n\n    /**\n     * Проверяет, что указанные поля в объекте заполнены.\n     * @param {Object} obj - проверяемый объект\n     * @param {Array} fields - список названий полей, которые надо проверить\n     * @returns {boolean}\n     */\n    fieldsAreNotEmpty: function(obj, fields) {\n        if (!lang_util.isPlainObject(obj)) {\n            return false;\n        }\n        var result = true;\n        collection_util.each(fields, function(field, i) {\n            result = !!obj[field];\n            return result;\n        });\n        return result;\n    },\n\n    /**\n     * Возвращает вложенное значение по указанному пути\n     * например, 'data.address.value'\n     */\n    getDeepValue: function self(obj, name) {\n        var path = name.split(\".\"),\n            step = path.shift();\n\n        return (\n            obj && (path.length ? self(obj[step], path.join(\".\")) : obj[step])\n        );\n    },\n\n    /**\n     * Возвращает карту объектов по их идентификаторам.\n     * Принимает на вход массив объектов и идентифицирующее поле.\n     * Возвращает карты, ключом в которой является значение идентифицирующего поля,\n     *   а значением — исходный объект.\n     * Заодно добавляет объектам поле с порядковым номером.\n     * @param {Array} objectsArray - массив объектов\n     * @param {string} idField - название идентифицирующего поля\n     * @param {string} indexField - название поля с порядковым номером\n     * @return {Object} карта объектов по их идентификаторам\n     */\n    indexObjectsById: function(objectsArray, idField, indexField) {\n        var result = {};\n\n        collection_util.each(objectsArray, function(obj, idx) {\n            var key = obj[idField];\n            var val = {};\n\n            if (indexField) {\n                val[indexField] = idx;\n            }\n\n            result[key] = object_util.assign(val, obj);\n        });\n\n        return result;\n    }\n};\n\nvar KEYS = {\n    ENTER: 13,\n    ESC: 27,\n    TAB: 9,\n    SPACE: 32,\n    UP: 38,\n    DOWN: 40\n};\n\nvar CLASSES = {\n    hint: \"suggestions-hint\",\n    mobile: \"suggestions-mobile\",\n    nowrap: \"suggestions-nowrap\",\n    promo: \"suggestions-promo\",\n    selected: \"suggestions-selected\",\n    suggestion: \"suggestions-suggestion\",\n    subtext: \"suggestions-subtext\",\n    subtext_inline: \"suggestions-subtext suggestions-subtext_inline\",\n    subtext_delimiter: \"suggestions-subtext-delimiter\",\n    subtext_label: \"suggestions-subtext suggestions-subtext_label\",\n    removeConstraint: \"suggestions-remove\",\n    value: \"suggestions-value\"\n};\n\nvar EVENT_NS = \".suggestions\";\nvar DATA_ATTR_KEY = \"suggestions\";\nvar WORD_DELIMITERS = \"\\\\s\\\"'~\\\\*\\\\.,:\\\\|\\\\[\\\\]\\\\(\\\\)\\\\{\\\\}<>№\";\nvar WORD_PARTS_DELIMITERS = \"\\\\-\\\\+\\\\\\\\\\\\?!@#$%^&\";\n\n/**\n * Утилиты для работы с текстом.\n */\n\nvar WORD_SPLITTER = new RegExp(\"[\" + WORD_DELIMITERS + \"]+\", \"g\");\nvar WORD_PARTS_SPLITTER = new RegExp(\"[\" + WORD_PARTS_DELIMITERS + \"]+\", \"g\");\n\nvar text_util = {\n    /**\n     * Заменяет амперсанд, угловые скобки и другие подобные символы\n     * на HTML-коды\n     */\n    escapeHtml: function(str) {\n        var map = {\n            \"&\": \"&amp;\",\n            \"<\": \"&lt;\",\n            \">\": \"&gt;\",\n            '\"': \"&quot;\",\n            \"'\": \"&#x27;\",\n            \"/\": \"&#x2F;\"\n        };\n\n        if (str) {\n            collection_util.each(map, function(html, ch) {\n                str = str.replace(new RegExp(ch, \"g\"), html);\n            });\n        }\n        return str;\n    },\n\n    /**\n     * Эскейпирует символы RegExp-шаблона обратным слешем\n     * (для передачи в конструктор регулярных выражений)\n     */\n    escapeRegExChars: function(value) {\n        return value.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n    },\n\n    /**\n     * Приводит слово к нижнему регистру и заменяет ё → е\n     */\n    formatToken: function(token) {\n        return token && token.toLowerCase().replace(/[ёЁ]/g, \"е\");\n    },\n\n    /**\n     * Возвращает регулярное выражение для разбивки строки на слова\n     */\n    getWordExtractorRegExp: function() {\n        return new RegExp(\n            \"([^\" + WORD_DELIMITERS + \"]*)([\" + WORD_DELIMITERS + \"]*)\",\n            \"g\"\n        );\n    },\n\n    /**\n     * Вырезает из строки стоп-слова\n     */\n    normalize: function(str, stopwords) {\n        return text_util.split(str, stopwords).join(\" \");\n    },\n\n    /**\n     * Добивает строку указанным символов справа до указанной длины\n     * @param sourceString  исходная строка\n     * @param targetLength  до какой длины добивать\n     * @param padString  каким символом добивать\n     * @returns строка указанной длины\n     */\n    padEnd: function(sourceString, targetLength, padString) {\n        if (String.prototype.padEnd) {\n            return sourceString.padEnd(targetLength, padString);\n        }\n        targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\n        padString = String(typeof padString !== \"undefined\" ? padString : \" \");\n        if (sourceString.length > targetLength) {\n            return String(sourceString);\n        } else {\n            targetLength = targetLength - sourceString.length;\n            if (targetLength > padString.length) {\n                padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n            }\n            return String(sourceString) + padString.slice(0, targetLength);\n        }\n    },\n\n    /**\n     * Нормализует строку, разбивает на слова,\n     * отсеивает стоп-слова из списка.\n     * Расклеивает буквы и цифры, написанные слитно.\n     */\n    split: function(str, stopwords) {\n        var cleanStr = str\n            .toLowerCase()\n            .replace(\"ё\", \"е\")\n            .replace(/(\\d+)([а-я]{2,})/g, \"$1 $2\")\n            .replace(/([а-я]+)(\\d+)/g, \"$1 $2\");\n\n        var words = collection_util.compact(cleanStr.split(WORD_SPLITTER));\n        if (!words.length) {\n            return [];\n        }\n        var lastWord = words.pop();\n        var goodWords = collection_util.minus(words, stopwords);\n        goodWords.push(lastWord);\n        return goodWords;\n    },\n\n    /**\n     * Заменяет слова на составные части.\n     * В отличие от withSubTokens, не сохраняет исходные слова.\n     */\n    splitTokens: function(tokens) {\n        var result = [];\n        collection_util.each(tokens, function(token, i) {\n            var subtokens = token.split(WORD_PARTS_SPLITTER);\n            result = result.concat(collection_util.compact(subtokens));\n        });\n        return result;\n    },\n\n    /**\n     * Проверяет, включает ли строка 1 строку 2.\n     * Если строки равны, возвращает false.\n     */\n    stringEncloses: function(str1, str2) {\n        return (\n            str1.length > str2.length &&\n            str1.toLowerCase().indexOf(str2.toLowerCase()) !== -1\n        );\n    },\n\n    /**\n     * Возвращает список слов из строки.\n     * При этом первыми по порядку идут «предпочтительные» слова\n     * (те, что не входят в список «нежелательных»).\n     * Составные слова тоже разбивает на части.\n     * @param {string} value - строка\n     * @param {Array} unformattableTokens - «нежелательные» слова\n     * @return {Array} Массив атомарных слов\n     */\n    tokenize: function(value, unformattableTokens) {\n        var tokens = collection_util.compact(\n            text_util.formatToken(value).split(WORD_SPLITTER)\n        );\n        // Move unformattableTokens to the end.\n        // This will help to apply them only if no other tokens match\n        var preferredTokens = collection_util.minus(\n            tokens,\n            unformattableTokens\n        );\n        var otherTokens = collection_util.minus(tokens, preferredTokens);\n        tokens = text_util.withSubTokens(preferredTokens.concat(otherTokens));\n        return tokens;\n    },\n\n    /**\n     * Разбивает составные слова на части\n     * и дописывает их к исходному массиву.\n     * @param {Array} tokens - слова\n     * @return {Array} Массив атомарных слов\n     */\n    withSubTokens: function(tokens) {\n        var result = [];\n        collection_util.each(tokens, function(token, i) {\n            var subtokens = token.split(WORD_PARTS_SPLITTER);\n            result.push(token);\n            if (subtokens.length > 1) {\n                result = result.concat(collection_util.compact(subtokens));\n            }\n        });\n        return result;\n    }\n};\n\n/**\n * jQuery API.\n */\nvar jqapi = {\n    Deferred: function() {\n        return $.Deferred();\n    },\n\n    ajax: function(settings) {\n        return $.ajax(settings);\n    },\n\n    extend: function() {\n        return $.extend.apply(null, arguments);\n    },\n\n    isJqObject: function(obj) {\n        return obj instanceof $;\n    },\n\n    param: function(obj) {\n        return $.param(obj);\n    },\n\n    proxy: function(func, context) {\n        return $.proxy(func, context);\n    },\n\n    select: function(selector) {\n        return $(selector);\n    },\n\n    supportsCors: function() {\n        return $.support.cors;\n    }\n};\n\n/**\n * Утилиты для работы через AJAX\n */\nvar ajax = {\n    /**\n     * HTTP-метод, который поддерживает браузер\n     */\n    getDefaultType: function() {\n        return jqapi.supportsCors() ? \"POST\" : \"GET\";\n    },\n\n    /**\n     * Content-type, который поддерживает браузер\n     */\n    getDefaultContentType: function() {\n        return jqapi.supportsCors()\n            ? \"application/json\"\n            : \"application/x-www-form-urlencoded\";\n    },\n\n    /**\n     * Меняет HTTPS на протокол страницы, если браузер не поддерживает CORS\n     */\n    fixURLProtocol: function(url) {\n        return jqapi.supportsCors()\n            ? url\n            : url.replace(/^https?:/, location.protocol);\n    },\n\n    /**\n     * Записывает параметры в GET-строку\n     */\n    addUrlParams: function(url, params) {\n        return url + (/\\?/.test(url) ? \"&\" : \"?\") + jqapi.param(params);\n    },\n\n    /**\n     * Сериализует объект для передачи по сети.\n     * Либо в JSON-строку (если браузер поддерживает CORS),\n     *   либо в GET-строку.\n     */\n    serialize: function(data) {\n        if (jqapi.supportsCors()) {\n            return JSON.stringify(data, function(key, value) {\n                return value === null ? undefined : value;\n            });\n        } else {\n            data = object_util.compact(data);\n            return jqapi.param(data, true);\n        }\n    }\n};\n\n/**\n * Возвращает автоинкрементный идентификатор.\n * @param {string} prefix - префикс для идентификатора\n */\nvar generateId = (function() {\n    var counter = 0;\n    return function(prefix) {\n        return (prefix || \"\") + ++counter;\n    };\n})();\n\n/**\n * Утилиты на все случаи жизни.\n */\nvar utils = {\n    escapeRegExChars: text_util.escapeRegExChars,\n    escapeHtml: text_util.escapeHtml,\n    formatToken: text_util.formatToken,\n    normalize: text_util.normalize,\n    reWordExtractor: text_util.getWordExtractorRegExp,\n    stringEncloses: text_util.stringEncloses,\n\n    addUrlParams: ajax.addUrlParams,\n    getDefaultContentType: ajax.getDefaultContentType,\n    getDefaultType: ajax.getDefaultType,\n    fixURLProtocol: ajax.fixURLProtocol,\n    serialize: ajax.serialize,\n\n    arrayMinus: collection_util.minus,\n    arrayMinusWithPartialMatching: collection_util.minusWithPartialMatching,\n    arraysIntersection: collection_util.intersect,\n    compact: collection_util.compact,\n    each: collection_util.each,\n    makeArray: collection_util.makeArray,\n    slice: collection_util.slice,\n\n    delay: func_util.delay,\n\n    areSame: object_util.areSame,\n    compactObject: object_util.compact,\n    getDeepValue: object_util.getDeepValue,\n    fieldsNotEmpty: object_util.fieldsAreNotEmpty,\n    indexBy: object_util.indexObjectsById,\n\n    isArray: lang_util.isArray,\n    isEmptyObject: lang_util.isEmptyObject,\n    isFunction: lang_util.isFunction,\n    isPlainObject: lang_util.isPlainObject,\n\n    uniqueId: generateId\n};\n\nvar DEFAULT_OPTIONS = {\n    $helpers: null,\n    autoSelectFirst: false,\n    containerClass: \"suggestions-suggestions\",\n    count: 5,\n    deferRequestBy: 100,\n    enrichmentEnabled: true,\n    formatResult: null,\n    formatSelected: null,\n    headers: null,\n    hint: \"Выберите вариант или продолжите ввод\",\n    initializeInterval: 100,\n    language: null,\n    minChars: 1,\n    mobileWidth: 600,\n    noCache: false,\n    noSuggestionsHint: null,\n    onInvalidateSelection: null,\n    onSearchComplete: $.noop,\n    onSearchError: $.noop,\n    onSearchStart: $.noop,\n    onSelect: null,\n    onSelectNothing: null,\n    onSuggestionsFetch: null,\n    paramName: \"query\",\n    params: {},\n    preventBadQueries: false,\n    requestMode: \"suggest\",\n    scrollOnFocus: false,\n    // основной url, может быть переопределен\n    serviceUrl: \"https://suggestions.dadata.ru/suggestions/api/4_1/rs\",\n    tabDisabled: false,\n    timeout: 3000,\n    triggerSelectOnBlur: true,\n    triggerSelectOnEnter: true,\n    triggerSelectOnSpace: false,\n    type: null,\n    // url, который заменяет serviceUrl + method + type\n    // то есть, если он задан, то для всех запросов будет использоваться именно он\n    // если не поддерживается cors то к url будут добавлены параметры ?token=...&version=...\n    // и заменен протокол на протокол текущей страницы\n    url: null\n};\n\n/**\n * Factory to create same parent checker function\n * @param preprocessFn called on each value before comparison\n * @returns {Function} same parent checker function\n */\nfunction sameParentChecker(preprocessFn) {\n    return function(suggestions) {\n        if (suggestions.length === 0) {\n            return false;\n        }\n        if (suggestions.length === 1) {\n            return true;\n        }\n\n        var parentValue = preprocessFn(suggestions[0].value),\n            aliens = suggestions.filter(function(suggestion) {\n                return (\n                    preprocessFn(suggestion.value).indexOf(parentValue) !== 0\n                );\n            });\n\n        return aliens.length === 0;\n    };\n}\n\n/**\n * Default same parent checker. Compares raw values.\n * @type {Function}\n */\nvar haveSameParent = sameParentChecker(function(val) {\n    return val;\n});\n\n/**\n * Сравнивает запрос c подсказками, по словам.\n * Срабатывает, только если у всех подсказок общий родитель\n * (функция сверки передаётся параметром).\n * Игнорирует стоп-слова.\n * Возвращает индекс единственной подходящей подсказки\n * или -1, если подходящих нет или несколько.\n */\nfunction _matchByWords(stopwords, parentCheckerFn) {\n    return function(query, suggestions) {\n        var queryTokens;\n        var matches = [];\n\n        if (parentCheckerFn(suggestions)) {\n            queryTokens = text_util.splitTokens(\n                text_util.split(query, stopwords)\n            );\n\n            collection_util.each(suggestions, function(suggestion, i) {\n                var suggestedValue = suggestion.value;\n\n                if (text_util.stringEncloses(query, suggestedValue)) {\n                    return false;\n                }\n\n                // check if query words are a subset of suggested words\n                var suggestionWords = text_util.splitTokens(\n                    text_util.split(suggestedValue, stopwords)\n                );\n\n                if (\n                    collection_util.minus(queryTokens, suggestionWords)\n                        .length === 0\n                ) {\n                    matches.push(i);\n                }\n            });\n        }\n\n        return matches.length === 1 ? matches[0] : -1;\n    };\n}\n\n/**\n * Matchers return index of suitable suggestion\n * Context inside is optionally set in types.js\n */\nvar matchers = {\n    /**\n     * Matches query against suggestions, removing all the stopwords.\n     */\n    matchByNormalizedQuery: function(stopwords) {\n        return function(query, suggestions) {\n            var normalizedQuery = text_util.normalize(query, stopwords);\n            var matches = [];\n\n            collection_util.each(suggestions, function(suggestion, i) {\n                var suggestedValue = suggestion.value.toLowerCase();\n                // if query encloses suggestion, than it has already been selected\n                // so we should not select it anymore\n                if (text_util.stringEncloses(query, suggestedValue)) {\n                    return false;\n                }\n                // if there is suggestion that contains query as its part\n                // than we should ignore all other matches, even full ones\n                if (suggestedValue.indexOf(normalizedQuery) > 0) {\n                    return false;\n                }\n                if (\n                    normalizedQuery ===\n                    text_util.normalize(suggestedValue, stopwords)\n                ) {\n                    matches.push(i);\n                }\n            });\n\n            return matches.length === 1 ? matches[0] : -1;\n        };\n    },\n\n    matchByWords: function(stopwords) {\n        return _matchByWords(stopwords, haveSameParent);\n    },\n\n    matchByWordsAddress: function(stopwords) {\n        return _matchByWords(stopwords, haveSameParent);\n    },\n\n    /**\n     * Matches query against values contained in suggestion fields\n     * for cases, when there is only one suggestion\n     * only considers fields specified in fields map\n     * uses partial matching:\n     *   \"0445\" vs { value: \"ALFA-BANK\", data: { \"bic\": \"044525593\" }} is a match\n     */\n    matchByFields: function(fields) {\n        return function(query, suggestions) {\n            var tokens = text_util.splitTokens(text_util.split(query));\n            var suggestionWords = [];\n\n            if (suggestions.length === 1) {\n                if (fields) {\n                    collection_util.each(fields, function(stopwords, field) {\n                        var fieldValue = object_util.getDeepValue(\n                            suggestions[0],\n                            field\n                        );\n                        var fieldWords =\n                            fieldValue &&\n                            text_util.splitTokens(\n                                text_util.split(fieldValue, stopwords)\n                            );\n\n                        if (fieldWords && fieldWords.length) {\n                            suggestionWords = suggestionWords.concat(\n                                fieldWords\n                            );\n                        }\n                    });\n                }\n\n                if (\n                    collection_util.minusWithPartialMatching(\n                        tokens,\n                        suggestionWords\n                    ).length === 0\n                ) {\n                    return 0;\n                }\n            }\n\n            return -1;\n        };\n    }\n};\n\nvar ADDRESS_STOPWORDS = [\n    \"ао\",\n    \"аобл\",\n    \"дом\",\n    \"респ\",\n    \"а/я\",\n    \"аал\",\n    \"автодорога\",\n    \"аллея\",\n    \"арбан\",\n    \"аул\",\n    \"б-р\",\n    \"берег\",\n    \"бугор\",\n    \"вал\",\n    \"вл\",\n    \"волость\",\n    \"въезд\",\n    \"высел\",\n    \"г\",\n    \"городок\",\n    \"гск\",\n    \"д\",\n    \"двлд\",\n    \"днп\",\n    \"дор\",\n    \"дп\",\n    \"ж/д_будка\",\n    \"ж/д_казарм\",\n    \"ж/д_оп\",\n    \"ж/д_платф\",\n    \"ж/д_пост\",\n    \"ж/д_рзд\",\n    \"ж/д_ст\",\n    \"жилзона\",\n    \"жилрайон\",\n    \"жт\",\n    \"заезд\",\n    \"заимка\",\n    \"зона\",\n    \"к\",\n    \"казарма\",\n    \"канал\",\n    \"кв\",\n    \"кв-л\",\n    \"км\",\n    \"кольцо\",\n    \"комн\",\n    \"кордон\",\n    \"коса\",\n    \"кп\",\n    \"край\",\n    \"линия\",\n    \"лпх\",\n    \"м\",\n    \"массив\",\n    \"местность\",\n    \"мкр\",\n    \"мост\",\n    \"н/п\",\n    \"наб\",\n    \"нп\",\n    \"обл\",\n    \"округ\",\n    \"остров\",\n    \"оф\",\n    \"п\",\n    \"п/о\",\n    \"п/р\",\n    \"п/ст\",\n    \"парк\",\n    \"пгт\",\n    \"пер\",\n    \"переезд\",\n    \"пл\",\n    \"пл-ка\",\n    \"платф\",\n    \"погост\",\n    \"полустанок\",\n    \"починок\",\n    \"пр-кт\",\n    \"проезд\",\n    \"промзона\",\n    \"просек\",\n    \"просека\",\n    \"проселок\",\n    \"проток\",\n    \"протока\",\n    \"проулок\",\n    \"р-н\",\n    \"рзд\",\n    \"россия\",\n    \"рп\",\n    \"ряды\",\n    \"с\",\n    \"с/а\",\n    \"с/мо\",\n    \"с/о\",\n    \"с/п\",\n    \"с/с\",\n    \"сад\",\n    \"сквер\",\n    \"сл\",\n    \"снт\",\n    \"спуск\",\n    \"ст\",\n    \"ст-ца\",\n    \"стр\",\n    \"тер\",\n    \"тракт\",\n    \"туп\",\n    \"у\",\n    \"ул\",\n    \"уч-к\",\n    \"ф/х\",\n    \"ферма\",\n    \"х\",\n    \"ш\",\n    \"бульвар\",\n    \"владение\",\n    \"выселки\",\n    \"гаражно-строительный\",\n    \"город\",\n    \"деревня\",\n    \"домовладение\",\n    \"дорога\",\n    \"квартал\",\n    \"километр\",\n    \"комната\",\n    \"корпус\",\n    \"литер\",\n    \"леспромхоз\",\n    \"местечко\",\n    \"микрорайон\",\n    \"набережная\",\n    \"область\",\n    \"переулок\",\n    \"платформа\",\n    \"площадка\",\n    \"площадь\",\n    \"поселение\",\n    \"поселок\",\n    \"проспект\",\n    \"разъезд\",\n    \"район\",\n    \"республика\",\n    \"село\",\n    \"сельсовет\",\n    \"слобода\",\n    \"сооружение\",\n    \"станица\",\n    \"станция\",\n    \"строение\",\n    \"территория\",\n    \"тупик\",\n    \"улица\",\n    \"улус\",\n    \"участок\",\n    \"хутор\",\n    \"шоссе\"\n];\n\n/**\n * Компоненты адреса\n * @type {*[]}\n * id {String} Наименование типа\n * fields {Array of Strings}\n * forBounds {Boolean} может использоваться в ограничениях\n * forLocations {Boolean}\n * kladrFormat {Object}\n * fiasType {String} Наименование соответствующего ФИАС типа\n */\nvar ADDRESS_COMPONENTS = [\n    {\n        id: \"kladr_id\",\n        fields: [\"kladr_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"postal_code\",\n        fields: [\"postal_code\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"country_iso_code\",\n        fields: [\"country_iso_code\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"country\",\n        fields: [\"country\"],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 0, zeros: 13 },\n        fiasType: \"country_iso_code\"\n    },\n    {\n        id: \"region_iso_code\",\n        fields: [\"region_iso_code\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"region_fias_id\",\n        fields: [\"region_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"region_type_full\",\n        fields: [\"region_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 2, zeros: 11 },\n        fiasType: \"region_fias_id\"\n    },\n    {\n        id: \"region\",\n        fields: [\n            \"region\",\n            \"region_type\",\n            \"region_type_full\",\n            \"region_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 2, zeros: 11 },\n        fiasType: \"region_fias_id\"\n    },\n    {\n        id: \"area_fias_id\",\n        fields: [\"area_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"area_type_full\",\n        fields: [\"area_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 5, zeros: 8 },\n        fiasType: \"area_fias_id\"\n    },\n    {\n        id: \"area\",\n        fields: [\"area\", \"area_type\", \"area_type_full\", \"area_with_type\"],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 5, zeros: 8 },\n        fiasType: \"area_fias_id\"\n    },\n    {\n        id: \"city_fias_id\",\n        fields: [\"city_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"city_type_full\",\n        fields: [\"city_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 8, zeros: 5 },\n        fiasType: \"city_fias_id\"\n    },\n    {\n        id: \"city\",\n        fields: [\"city\", \"city_type\", \"city_type_full\", \"city_with_type\"],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 8, zeros: 5 },\n        fiasType: \"city_fias_id\"\n    },\n    {\n        id: \"city_district_fias_id\",\n        fields: [\"city_district_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"city_district_type_full\",\n        fields: [\"city_district_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"city_district_fias_id\"\n    },\n    {\n        id: \"city_district\",\n        fields: [\n            \"city_district\",\n            \"city_district_type\",\n            \"city_district_type_full\",\n            \"city_district_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"city_district_fias_id\"\n    },\n    {\n        id: \"settlement_fias_id\",\n        fields: [\"settlement_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"settlement_type_full\",\n        fields: [\"settlement_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"settlement_fias_id\"\n    },\n    {\n        id: \"settlement\",\n        fields: [\n            \"settlement\",\n            \"settlement_type\",\n            \"settlement_type_full\",\n            \"settlement_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"settlement_fias_id\"\n    },\n    {\n        id: \"street_fias_id\",\n        fields: [\"street_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"street_type_full\",\n        fields: [\"street_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 15, zeros: 2 },\n        fiasType: \"street_fias_id\"\n    },\n    {\n        id: \"street\",\n        fields: [\n            \"street\",\n            \"street_type\",\n            \"street_type_full\",\n            \"street_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 15, zeros: 2 },\n        fiasType: \"street_fias_id\"\n    },\n    {\n        id: \"house\",\n        fields: [\n            \"house\",\n            \"house_type\",\n            \"house_type_full\",\n            \"block\",\n            \"block_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 19 },\n        fiasType: \"house_fias_id\"\n    },\n    {\n        id: \"flat\",\n        fields: [\"flat\", \"flat_type\", \"flat_type_full\"],\n        forBounds: true,\n        forLocations: false,\n        kladrFormat: { digits: 19 },\n        fiasType: \"flat_fias_id\"\n    }\n];\n\nvar ADDRESS_TYPE = {\n    urlSuffix: \"address\",\n    noSuggestionsHint: \"Неизвестный адрес\",\n    matchers: [\n        matchers.matchByNormalizedQuery(ADDRESS_STOPWORDS),\n        matchers.matchByWordsAddress(ADDRESS_STOPWORDS)\n    ],\n    dataComponents: ADDRESS_COMPONENTS,\n    dataComponentsById: object_util.indexObjectsById(\n        ADDRESS_COMPONENTS,\n        \"id\",\n        \"index\"\n    ),\n    unformattableTokens: ADDRESS_STOPWORDS,\n    enrichmentEnabled: true,\n    enrichmentMethod: \"suggest\",\n    enrichmentParams: {\n        count: 1,\n        locations: null,\n        locations_boost: null,\n        from_bound: null,\n        to_bound: null\n    },\n    getEnrichmentQuery: function(suggestion) {\n        return suggestion.unrestricted_value;\n    },\n    geoEnabled: true,\n    isDataComplete: function(suggestion) {\n        var fields = [this.bounds.to || \"flat\"],\n            data = suggestion.data;\n\n        return (\n            !lang_util.isPlainObject(data) ||\n            object_util.fieldsAreNotEmpty(data, fields)\n        );\n    },\n    composeValue: function(data, options) {\n        var country = data.country,\n            region =\n                data.region_with_type ||\n                collection_util\n                    .compact([data.region, data.region_type])\n                    .join(\" \") ||\n                data.region_type_full,\n            area =\n                data.area_with_type ||\n                collection_util\n                    .compact([data.area_type, data.area])\n                    .join(\" \") ||\n                data.area_type_full,\n            city =\n                data.city_with_type ||\n                collection_util\n                    .compact([data.city_type, data.city])\n                    .join(\" \") ||\n                data.city_type_full,\n            settelement =\n                data.settlement_with_type ||\n                collection_util\n                    .compact([data.settlement_type, data.settlement])\n                    .join(\" \") ||\n                data.settlement_type_full,\n            cityDistrict =\n                data.city_district_with_type ||\n                collection_util\n                    .compact([data.city_district_type, data.city_district])\n                    .join(\" \") ||\n                data.city_district_type_full,\n            street =\n                data.street_with_type ||\n                collection_util\n                    .compact([data.street_type, data.street])\n                    .join(\" \") ||\n                data.street_type_full,\n            house = collection_util\n                .compact([\n                    data.stead_type,\n                    data.stead,\n                    data.house_type,\n                    data.house,\n                    data.block_type,\n                    data.block\n                ])\n                .join(\" \"),\n            flat = collection_util\n                .compact([data.flat_type, data.flat])\n                .join(\" \"),\n            postal_box = data.postal_box && \"а/я \" + data.postal_box,\n            result;\n\n        // если регион совпадает с городом\n        // например г Москва, г Москва\n        // то не показываем регион\n        if (region === city) {\n            region = \"\";\n        }\n\n        // иногда не показываем район\n        if (!(options && options.saveCityDistrict)) {\n            if (options && options.excludeCityDistrict) {\n                // если район явно запрещен\n                cityDistrict = \"\";\n            } else if (cityDistrict && !data.city_district_fias_id) {\n                // если район взят из ОКАТО (у него пустой city_district_fias_id)\n                cityDistrict = \"\";\n            }\n        }\n\n        result = collection_util\n            .compact([\n                country,\n                region,\n                area,\n                city,\n                cityDistrict,\n                settelement,\n                street,\n                house,\n                flat,\n                postal_box\n            ])\n            .join(\", \");\n\n        return result;\n    },\n    formatResult: (function() {\n        var componentsUnderCityDistrict = [],\n            _underCityDistrict = false;\n\n        ADDRESS_COMPONENTS.forEach(function(component) {\n            if (_underCityDistrict)\n                componentsUnderCityDistrict.push(component.id);\n            if (component.id === \"city_district\") _underCityDistrict = true;\n        });\n\n        return function(value, currentValue, suggestion, options) {\n            var that = this,\n                district =\n                    suggestion.data && suggestion.data.city_district_with_type,\n                unformattableTokens = options && options.unformattableTokens,\n                historyValues =\n                    suggestion.data && suggestion.data.history_values,\n                tokens,\n                unusedTokens,\n                formattedHistoryValues;\n\n            // добавляем исторические значения\n            if (historyValues && historyValues.length > 0) {\n                tokens = text_util.tokenize(currentValue, unformattableTokens);\n                unusedTokens = this.type.findUnusedTokens(tokens, value);\n                formattedHistoryValues = this.type.getFormattedHistoryValues(\n                    unusedTokens,\n                    historyValues\n                );\n                if (formattedHistoryValues) {\n                    value += formattedHistoryValues;\n                }\n            }\n\n            value = that.highlightMatches(\n                value,\n                currentValue,\n                suggestion,\n                options\n            );\n            value = that.wrapFormattedValue(value, suggestion);\n\n            if (\n                district &&\n                (!that.bounds.own.length ||\n                    that.bounds.own.indexOf(\"street\") >= 0) &&\n                !lang_util.isEmptyObject(\n                    that.copyDataComponents(\n                        suggestion.data,\n                        componentsUnderCityDistrict\n                    )\n                )\n            ) {\n                value +=\n                    '<div class=\"' +\n                    that.classes.subtext +\n                    '\">' +\n                    that.highlightMatches(district, currentValue, suggestion) +\n                    \"</div>\";\n            }\n\n            return value;\n        };\n    })(),\n\n    /**\n     * Возвращает список слов в запросе,\n     * которые не встречаются в подсказке\n     */\n    findUnusedTokens: function(tokens, value) {\n        var tokenIndex,\n            token,\n            unused = [];\n\n        unused = tokens.filter(function(token) {\n            return value.indexOf(token) === -1;\n        });\n\n        return unused;\n    },\n\n    /**\n     * Возвращает исторические названия для слов запроса,\n     * для которых не найдено совпадения в основном значении подсказки\n     */\n    getFormattedHistoryValues: function(unusedTokens, historyValues) {\n        var tokenIndex,\n            token,\n            historyValueIndex,\n            historyValue,\n            values = [],\n            formatted = \"\";\n\n        historyValues.forEach(function(historyValue) {\n            collection_util.each(unusedTokens, function(token) {\n                if (historyValue.toLowerCase().indexOf(token) >= 0) {\n                    values.push(historyValue);\n                    return false;\n                }\n            });\n        });\n\n        if (values.length > 0) {\n            formatted = \" (бывш. \" + values.join(\", \") + \")\";\n        }\n\n        return formatted;\n    },\n\n    /**\n     * @param instance\n     * @param options\n     * @param options.suggestion\n     * @param options.hasSameValues\n     * @param options.hasBeenEnreached\n     */\n    getSuggestionValue: function(instance, options) {\n        var formattedValue = null;\n\n        if (options.hasSameValues) {\n            if (instance.options.restrict_value) {\n                // Can not use unrestricted address,\n                // because some components (from constraints) must be omitted\n                formattedValue = this.getValueWithinConstraints(\n                    instance,\n                    options.suggestion\n                );\n            } else if (instance.bounds.own.length) {\n                // Can not use unrestricted address,\n                // because only components from bounds must be included\n                formattedValue = this.getValueWithinBounds(\n                    instance,\n                    options.suggestion\n                );\n            } else {\n                // Can use full unrestricted address\n                formattedValue = options.suggestion.unrestricted_value;\n            }\n        } else if (options.hasBeenEnriched) {\n            if (instance.options.restrict_value) {\n                formattedValue = this.getValueWithinConstraints(\n                    instance,\n                    options.suggestion,\n                    { excludeCityDistrict: true }\n                );\n            }\n        }\n\n        return formattedValue;\n    },\n    /*\n     * Compose suggestion value with respect to constraints\n     */\n    getValueWithinConstraints: function(instance, suggestion, options) {\n        return this.composeValue(\n            instance.getUnrestrictedData(suggestion.data),\n            options\n        );\n    },\n    /*\n     * Compose suggestion value with respect to bounds\n     */\n    getValueWithinBounds: function(instance, suggestion, options) {\n        // для корректного составления адреса нужен city_district_fias_id\n        var data = instance.copyDataComponents(\n            suggestion.data,\n            instance.bounds.own.concat([\"city_district_fias_id\"])\n        );\n\n        return this.composeValue(data, options);\n    }\n};\n\n/**\n * Компоненты адреса\n * @type {*[]}\n * id {String} Наименование типа\n * fields {Array of Strings}\n * forBounds {Boolean} может использоваться в ограничениях\n * forLocations {Boolean}\n * kladrFormat {Object}\n * fiasType {String} Наименование соответствующего ФИАС типа\n */\nvar FIAS_COMPONENTS = [\n    {\n        id: \"kladr_id\",\n        fields: [\"kladr_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"region_fias_id\",\n        fields: [\"region_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"region_type_full\",\n        fields: [\"region_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 2, zeros: 11 },\n        fiasType: \"region_fias_id\"\n    },\n    {\n        id: \"region\",\n        fields: [\n            \"region\",\n            \"region_type\",\n            \"region_type_full\",\n            \"region_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 2, zeros: 11 },\n        fiasType: \"region_fias_id\"\n    },\n    {\n        id: \"area_fias_id\",\n        fields: [\"area_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"area_type_full\",\n        fields: [\"area_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 5, zeros: 8 },\n        fiasType: \"area_fias_id\"\n    },\n    {\n        id: \"area\",\n        fields: [\"area\", \"area_type\", \"area_type_full\", \"area_with_type\"],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 5, zeros: 8 },\n        fiasType: \"area_fias_id\"\n    },\n    {\n        id: \"city_fias_id\",\n        fields: [\"city_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"city_type_full\",\n        fields: [\"city_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 8, zeros: 5 },\n        fiasType: \"city_fias_id\"\n    },\n    {\n        id: \"city\",\n        fields: [\"city\", \"city_type\", \"city_type_full\", \"city_with_type\"],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 8, zeros: 5 },\n        fiasType: \"city_fias_id\"\n    },\n    {\n        id: \"city_district_fias_id\",\n        fields: [\"city_district_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"city_district_type_full\",\n        fields: [\"city_district_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"city_district_fias_id\"\n    },\n    {\n        id: \"city_district\",\n        fields: [\n            \"city_district\",\n            \"city_district_type\",\n            \"city_district_type_full\",\n            \"city_district_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"city_district_fias_id\"\n    },\n    {\n        id: \"settlement_fias_id\",\n        fields: [\"settlement_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"settlement_type_full\",\n        fields: [\"settlement_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"settlement_fias_id\"\n    },\n    {\n        id: \"settlement\",\n        fields: [\n            \"settlement\",\n            \"settlement_type\",\n            \"settlement_type_full\",\n            \"settlement_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 11, zeros: 2 },\n        fiasType: \"settlement_fias_id\"\n    },\n    {\n        id: \"planning_structure_fias_id\",\n        fields: [\"planning_structure_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"planning_structure_type_full\",\n        fields: [\"planning_structure_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 15, zeros: 2 },\n        fiasType: \"planning_structure_fias_id\"\n    },\n    {\n        id: \"planning_structure\",\n        fields: [\n            \"planning_structure\",\n            \"planning_structure_type\",\n            \"planning_structure_type_full\",\n            \"planning_structure_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 15, zeros: 2 },\n        fiasType: \"planning_structure_fias_id\"\n    },\n    {\n        id: \"street_fias_id\",\n        fields: [\"street_fias_id\"],\n        forBounds: false,\n        forLocations: true\n    },\n    {\n        id: \"street_type_full\",\n        fields: [\"street_type_full\"],\n        forBounds: false,\n        forLocations: true,\n        kladrFormat: { digits: 15, zeros: 2 },\n        fiasType: \"street_fias_id\"\n    },\n    {\n        id: \"street\",\n        fields: [\n            \"street\",\n            \"street_type\",\n            \"street_type_full\",\n            \"street_with_type\"\n        ],\n        forBounds: true,\n        forLocations: true,\n        kladrFormat: { digits: 15, zeros: 2 },\n        fiasType: \"street_fias_id\"\n    },\n    {\n        id: \"house\",\n        fields: [\"house\", \"house_type\", \"block\", \"building_type\", \"building\"],\n        forBounds: true,\n        forLocations: false,\n        kladrFormat: { digits: 19 }\n    }\n];\n\nvar FIAS_TYPE = {\n    urlSuffix: \"fias\",\n    noSuggestionsHint: \"Неизвестный адрес\",\n    matchers: [\n        matchers.matchByNormalizedQuery(ADDRESS_STOPWORDS),\n        matchers.matchByWordsAddress(ADDRESS_STOPWORDS)\n    ],\n    dataComponents: FIAS_COMPONENTS,\n    dataComponentsById: object_util.indexObjectsById(\n        FIAS_COMPONENTS,\n        \"id\",\n        \"index\"\n    ),\n    unformattableTokens: ADDRESS_STOPWORDS,\n    isDataComplete: function(suggestion) {\n        var fields = [this.bounds.to || \"house\"],\n            data = suggestion.data;\n\n        return (\n            !lang_util.isPlainObject(data) ||\n            object_util.fieldsAreNotEmpty(data, fields)\n        );\n    },\n    composeValue: function(data, options) {\n        var country = data.country,\n            region =\n                data.region_with_type ||\n                collection_util\n                    .compact([data.region, data.region_type])\n                    .join(\" \") ||\n                data.region_type_full,\n            area =\n                data.area_with_type ||\n                collection_util\n                    .compact([data.area_type, data.area])\n                    .join(\" \") ||\n                data.area_type_full,\n            city =\n                data.city_with_type ||\n                collection_util\n                    .compact([data.city_type, data.city])\n                    .join(\" \") ||\n                data.city_type_full,\n            settelement =\n                data.settlement_with_type ||\n                collection_util\n                    .compact([data.settlement_type, data.settlement])\n                    .join(\" \") ||\n                data.settlement_type_full,\n            cityDistrict =\n                data.city_district_with_type ||\n                collection_util\n                    .compact([data.city_district_type, data.city_district])\n                    .join(\" \") ||\n                data.city_district_type_full,\n            planning_structure =\n                data.planning_structure_with_type ||\n                collection_util\n                    .compact([\n                        data.planning_structure_type,\n                        data.planning_structure\n                    ])\n                    .join(\" \") ||\n                data.planning_structure_type_full,\n            street =\n                data.street_with_type ||\n                collection_util\n                    .compact([data.street_type, data.street])\n                    .join(\" \") ||\n                data.street_type_full,\n            house = collection_util\n                .compact([\n                    data.house_type,\n                    data.house,\n                    data.block_type,\n                    data.block\n                ])\n                .join(\" \"),\n            flat = collection_util\n                .compact([data.flat_type, data.flat])\n                .join(\" \"),\n            postal_box = data.postal_box && \"а/я \" + data.postal_box,\n            result;\n\n        // если регион совпадает с городом\n        // например г Москва, г Москва\n        // то не показываем регион\n        if (region === city) {\n            region = \"\";\n        }\n\n        // иногда не показываем район\n        if (!(options && options.saveCityDistrict)) {\n            if (options && options.excludeCityDistrict) {\n                // если район явно запрещен\n                cityDistrict = \"\";\n            } else if (cityDistrict && !data.city_district_fias_id) {\n                // если район взят из ОКАТО (у него пустой city_district_fias_id)\n                cityDistrict = \"\";\n            }\n        }\n\n        result = collection_util\n            .compact([\n                country,\n                region,\n                area,\n                city,\n                cityDistrict,\n                settelement,\n                planning_structure,\n                street,\n                house,\n                flat,\n                postal_box\n            ])\n            .join(\", \");\n\n        return result;\n    },\n    formatResult: (function() {\n        return function(value, currentValue, suggestion, options) {\n            var that = this;\n\n            value = that.highlightMatches(\n                value,\n                currentValue,\n                suggestion,\n                options\n            );\n            value = that.wrapFormattedValue(value, suggestion);\n            return value;\n        };\n    })(),\n\n    getSuggestionValue: ADDRESS_TYPE.getSuggestionValue,\n    getValueWithinConstraints: ADDRESS_TYPE.getValueWithinConstraints,\n    getValueWithinBounds: ADDRESS_TYPE.getValueWithinBounds\n};\n\nfunction valueStartsWith(suggestion, field) {\n    var fieldValue = suggestion.data && suggestion.data[field];\n\n    return (\n        fieldValue &&\n        new RegExp(\n            \"^\" +\n                text_util.escapeRegExChars(fieldValue) +\n                \"([\" +\n                WORD_DELIMITERS +\n                \"]|$)\",\n            \"i\"\n        ).test(suggestion.value)\n    );\n}\n\nvar NAME_TYPE = {\n    urlSuffix: \"fio\",\n    noSuggestionsHint: false,\n    matchers: [matchers.matchByNormalizedQuery(), matchers.matchByWords()],\n    // names for labels, describing which fields are displayed\n    fieldNames: {\n        surname: \"фамилия\",\n        name: \"имя\",\n        patronymic: \"отчество\"\n    },\n    isDataComplete: function(suggestion) {\n        var that = this,\n            params = that.options.params,\n            data = suggestion.data,\n            fields;\n\n        if (lang_util.isFunction(params)) {\n            params = params.call(that.element, suggestion.value);\n        }\n        if (params && params.parts) {\n            fields = params.parts.map(function(part) {\n                return part.toLowerCase();\n            });\n        } else {\n            // when NAME is first, patronymic is mot mandatory\n            fields = [\"surname\", \"name\"];\n            // when SURNAME is first, it is\n            if (valueStartsWith(suggestion, \"surname\")) {\n                fields.push(\"patronymic\");\n            }\n        }\n        return object_util.fieldsAreNotEmpty(data, fields);\n    },\n    composeValue: function(data) {\n        return collection_util\n            .compact([data.surname, data.name, data.patronymic])\n            .join(\" \");\n    }\n};\n\nvar innPartsLengths = {\n    LEGAL: [2, 2, 5, 1],\n    INDIVIDUAL: [2, 2, 6, 2]\n};\n\nfunction chooseFormattedField(formattedMain, formattedAlt) {\n    var rHasMatch = /<strong>/;\n    return rHasMatch.test(formattedAlt) && !rHasMatch.test(formattedMain)\n        ? formattedAlt\n        : formattedMain;\n}\n\nfunction formattedField(main, alt, currentValue, suggestion, options) {\n    var that = this,\n        formattedMain = that.highlightMatches(\n            main,\n            currentValue,\n            suggestion,\n            options\n        ),\n        formattedAlt = that.highlightMatches(\n            alt,\n            currentValue,\n            suggestion,\n            options\n        );\n\n    return chooseFormattedField(formattedMain, formattedAlt);\n}\n\nvar PARTY_TYPE = {\n    urlSuffix: \"party\",\n    noSuggestionsHint: \"Неизвестная организация\",\n    matchers: [\n        matchers.matchByFields(\n            // These fields of suggestion's `data` used by by-words matcher\n            {\n                value: null,\n                \"data.address.value\": ADDRESS_STOPWORDS,\n                \"data.inn\": null,\n                \"data.ogrn\": null\n            }\n        )\n    ],\n    dataComponents: ADDRESS_COMPONENTS,\n    enrichmentEnabled: true,\n    enrichmentMethod: \"findById\",\n    enrichmentParams: {\n        count: 1,\n        locations_boost: null\n    },\n    getEnrichmentQuery: function(suggestion) {\n        return suggestion.data.hid;\n    },\n    geoEnabled: true,\n    formatResult: function(value, currentValue, suggestion, options) {\n        var that = this,\n            formattedInn = that.type.formatResultInn.call(\n                that,\n                suggestion,\n                currentValue\n            ),\n            formatterOGRN = that.highlightMatches(\n                object_util.getDeepValue(suggestion.data, \"ogrn\"),\n                currentValue,\n                suggestion\n            ),\n            formattedInnOGRN = chooseFormattedField(\n                formattedInn,\n                formatterOGRN\n            ),\n            formattedFIO = that.highlightMatches(\n                object_util.getDeepValue(suggestion.data, \"management.name\"),\n                currentValue,\n                suggestion\n            ),\n            address =\n                object_util.getDeepValue(suggestion.data, \"address.value\") ||\n                \"\";\n\n        if (that.isMobile) {\n            (options || (options = {})).maxLength = 50;\n        }\n\n        value = formattedField.call(\n            that,\n            value,\n            object_util.getDeepValue(suggestion.data, \"name.latin\"),\n            currentValue,\n            suggestion,\n            options\n        );\n        value = that.wrapFormattedValue(value, suggestion);\n\n        if (address) {\n            address = address.replace(/^(\\d{6}|Россия),\\s+/i, \"\");\n            if (that.isMobile) {\n                // keep only two first words\n                address = address.replace(\n                    new RegExp(\n                        \"^([^\" +\n                            WORD_DELIMITERS +\n                            \"]+[\" +\n                            WORD_DELIMITERS +\n                            \"]+[^\" +\n                            WORD_DELIMITERS +\n                            \"]+).*\"\n                    ),\n                    \"$1\"\n                );\n            } else {\n                address = that.highlightMatches(\n                    address,\n                    currentValue,\n                    suggestion,\n                    {\n                        unformattableTokens: ADDRESS_STOPWORDS\n                    }\n                );\n            }\n        }\n\n        if (formattedInnOGRN || address || formattedFIO) {\n            value +=\n                '<div class=\"' +\n                that.classes.subtext +\n                '\">' +\n                '<span class=\"' +\n                that.classes.subtext_inline +\n                '\">' +\n                (formattedInnOGRN || \"\") +\n                \"</span>\" +\n                (chooseFormattedField(address, formattedFIO) || \"\") +\n                \"</div>\";\n        }\n        return value;\n    },\n    formatResultInn: function(suggestion, currentValue) {\n        var that = this,\n            inn = suggestion.data && suggestion.data.inn,\n            innPartsLength =\n                innPartsLengths[suggestion.data && suggestion.data.type],\n            innParts,\n            formattedInn,\n            rDigit = /\\d/;\n\n        if (inn) {\n            formattedInn = that.highlightMatches(inn, currentValue, suggestion);\n            if (innPartsLength) {\n                formattedInn = formattedInn.split(\"\");\n                innParts = innPartsLength.map(function(partLength) {\n                    var formattedPart = \"\",\n                        ch;\n\n                    while (partLength && (ch = formattedInn.shift())) {\n                        formattedPart += ch;\n                        if (rDigit.test(ch)) partLength--;\n                    }\n\n                    return formattedPart;\n                });\n                formattedInn =\n                    innParts.join(\n                        '<span class=\"' +\n                            that.classes.subtext_delimiter +\n                            '\"></span>'\n                    ) + formattedInn.join(\"\");\n            }\n\n            return formattedInn;\n        }\n    }\n};\n\nvar EMAIL_TYPE = {\n    urlSuffix: \"email\",\n    noSuggestionsHint: false,\n    matchers: [matchers.matchByNormalizedQuery()],\n    isQueryRequestable: function(query) {\n        return this.options.suggest_local || query.indexOf(\"@\") >= 0;\n    }\n};\n\nvar BANK_TYPE = {\n    urlSuffix: \"bank\",\n    noSuggestionsHint: \"Неизвестный банк\",\n    matchers: [\n        matchers.matchByFields(\n            // These fields of suggestion's `data` used by by-words matcher\n            {\n                value: null,\n                \"data.bic\": null,\n                \"data.swift\": null,\n            }\n        ),\n    ],\n    dataComponents: ADDRESS_COMPONENTS,\n    enrichmentEnabled: true,\n    enrichmentMethod: \"findById\",\n    enrichmentParams: {\n        count: 1,\n    },\n    getEnrichmentQuery: function(suggestion) {\n        return suggestion.data.bic;\n    },\n    geoEnabled: true,\n    formatResult: function(value, currentValue, suggestion, options) {\n        var that = this,\n            formattedBIC = that.highlightMatches(\n                object_util.getDeepValue(suggestion.data, \"bic\"),\n                currentValue,\n                suggestion\n            ),\n            address =\n                object_util.getDeepValue(suggestion.data, \"address.value\") ||\n                \"\";\n\n        value = that.highlightMatches(value, currentValue, suggestion, options);\n        value = that.wrapFormattedValue(value, suggestion);\n\n        if (address) {\n            address = address.replace(/^\\d{6}( РОССИЯ)?, /i, \"\");\n            if (that.isMobile) {\n                // keep only two first words\n                address = address.replace(\n                    new RegExp(\n                        \"^([^\" +\n                            WORD_DELIMITERS +\n                            \"]+[\" +\n                            WORD_DELIMITERS +\n                            \"]+[^\" +\n                            WORD_DELIMITERS +\n                            \"]+).*\"\n                    ),\n                    \"$1\"\n                );\n            } else {\n                address = that.highlightMatches(\n                    address,\n                    currentValue,\n                    suggestion,\n                    {\n                        unformattableTokens: ADDRESS_STOPWORDS,\n                    }\n                );\n            }\n        }\n\n        if (formattedBIC || address) {\n            value +=\n                '<div class=\"' +\n                that.classes.subtext +\n                '\">' +\n                '<span class=\"' +\n                that.classes.subtext_inline +\n                '\">' +\n                formattedBIC +\n                \"</span>\" +\n                address +\n                \"</div>\";\n        }\n        return value;\n    },\n    formatSelected: function(suggestion) {\n        return (\n            object_util.getDeepValue(suggestion, \"data.name.payment\") || null\n        );\n    },\n};\n\nfunction Outward(name) {\n    this.urlSuffix = name.toLowerCase();\n    this.noSuggestionsHint = \"Неизвестное значение\";\n    this.matchers = [\n        matchers.matchByNormalizedQuery(),\n        matchers.matchByWords()\n    ];\n}\n\n/**\n * Type is a bundle of properties:\n * - urlSuffix Mandatory. String\n * - matchers Mandatory. Array of functions (with optional data bound as a context) that find appropriate suggestion to select\n * - `fieldNames` Map fields of suggestion.data to their displayable names\n * - `unformattableTokens` Array of strings which should not be highlighted\n * - `dataComponents` Array of 'bound's can be set as `bounds` option. Order is important.\n *\n * flags:\n * - `alwaysContinueSelecting` Forbids to hide dropdown after selecting\n * - `geoEnabled` Makes to detect client's location for passing it to all requests\n * - `enrichmentEnabled` Makes to send additional request when a suggestion is selected\n *\n * and methods:\n * - `isDataComplete` Checks if suggestion.data can be operated as full data of it's type\n * - `composeValue` returns string value based on suggestion.data\n * - `formatResult` returns html of a suggestion. Overrides default method\n * - `formatResultInn` returns html of suggestion.data.inn\n * - `isQueryRequestable` checks if query is appropriated for requesting server\n * - `formatSelected` returns string to be inserted in textbox\n */\n\nvar types = {\n    NAME: NAME_TYPE,\n    ADDRESS: ADDRESS_TYPE,\n    FIAS: FIAS_TYPE,\n    PARTY: PARTY_TYPE,\n    EMAIL: EMAIL_TYPE,\n    BANK: BANK_TYPE\n};\n\ntypes.get = function(type) {\n    if (types.hasOwnProperty(type)) {\n        return types[type];\n    } else {\n        return new Outward(type);\n    }\n};\n\njqapi.extend(DEFAULT_OPTIONS, {\n    suggest_local: true\n});\n\nvar notificator = {\n    chains: {},\n\n    on: function(name, method) {\n        this.get(name).push(method);\n        return this;\n    },\n\n    get: function(name) {\n        var chains = this.chains;\n        return chains[name] || (chains[name] = []);\n    }\n};\n\nvar serviceMethods = {\n    suggest: {\n        defaultParams: {\n            type: utils.getDefaultType(),\n            dataType: \"json\",\n            contentType: utils.getDefaultContentType()\n        },\n        addTypeInUrl: true\n    },\n    \"iplocate/address\": {\n        defaultParams: {\n            type: \"GET\",\n            dataType: \"json\"\n        },\n        addTypeInUrl: false\n    },\n    status: {\n        defaultParams: {\n            type: \"GET\",\n            dataType: \"json\"\n        },\n        addTypeInUrl: true\n    },\n    findById: {\n        defaultParams: {\n            type: utils.getDefaultType(),\n            dataType: \"json\",\n            contentType: utils.getDefaultContentType()\n        },\n        addTypeInUrl: true\n    }\n};\n\nvar requestModes = {\n    suggest: {\n        method: \"suggest\",\n        userSelect: true,\n        updateValue: true,\n        enrichmentEnabled: true\n    },\n    findById: {\n        method: \"findById\",\n        userSelect: false,\n        updateValue: false,\n        enrichmentEnabled: false\n    }\n};\n\nfunction Suggestions(el, options) {\n    var that = this;\n\n    // Shared variables:\n    that.element = el;\n    that.el = $(el);\n    that.suggestions = [];\n    that.badQueries = [];\n    that.selectedIndex = -1;\n    that.currentValue = that.element.value;\n    that.intervalId = 0;\n    that.cachedResponse = {};\n    that.enrichmentCache = {};\n    that.currentRequest = null;\n    that.inputPhase = $.Deferred();\n    that.fetchPhase = $.Deferred();\n    that.enrichPhase = $.Deferred();\n    that.onChangeTimeout = null;\n    that.triggering = {};\n    that.$wrapper = null;\n    that.options = $.extend({}, DEFAULT_OPTIONS, options);\n    that.classes = CLASSES;\n    that.disabled = false;\n    that.selection = null;\n    that.$viewport = $(window);\n    that.$body = $(document.body);\n    that.type = null;\n    that.status = {};\n\n    that.setupElement();\n\n    that.initializer = $.Deferred();\n\n    if (that.el.is(\":visible\")) {\n        that.initializer.resolve();\n    } else {\n        that.deferInitialization();\n    }\n\n    that.initializer.done($.proxy(that.initialize, that));\n}\n\nSuggestions.prototype = {\n    // Creation and destruction\n\n    initialize: function() {\n        var that = this;\n        that.uniqueId = utils.uniqueId(\"i\");\n        that.createWrapper();\n        that.notify(\"initialize\");\n        that.bindWindowEvents();\n        that.setOptions();\n        that.inferIsMobile();\n        that.notify(\"ready\");\n    },\n\n    /**\n     * Initialize when element is firstly interacted\n     */\n    deferInitialization: function() {\n        var that = this,\n            events = \"mouseover focus keydown\",\n            timer,\n            callback = function() {\n                that.initializer.resolve();\n                that.enable();\n            };\n\n        that.initializer.always(function() {\n            that.el.off(events, callback);\n            clearInterval(timer);\n        });\n\n        that.disabled = true;\n        that.el.on(events, callback);\n        timer = setInterval(function() {\n            if (that.el.is(\":visible\")) {\n                callback();\n            }\n        }, that.options.initializeInterval);\n    },\n\n    isInitialized: function() {\n        return this.initializer.state() === \"resolved\";\n    },\n\n    dispose: function() {\n        var that = this;\n        that.initializer.reject();\n        that.notify(\"dispose\");\n        that.el.removeData(DATA_ATTR_KEY).removeClass(\"suggestions-input\");\n        that.unbindWindowEvents();\n        that.removeWrapper();\n        that.el.trigger(\"suggestions-dispose\");\n    },\n\n    notify: function(chainName) {\n        var that = this,\n            args = utils.slice(arguments, 1);\n\n        return $.map(notificator.get(chainName), function(method) {\n            return method.apply(that, args);\n        });\n    },\n\n    createWrapper: function() {\n        var that = this;\n\n        that.$wrapper = $('<div class=\"suggestions-wrapper\"/>');\n        that.el.after(that.$wrapper);\n\n        that.$wrapper.on(\n            \"mousedown\" + EVENT_NS,\n            $.proxy(that.onMousedown, that)\n        );\n    },\n\n    removeWrapper: function() {\n        var that = this;\n\n        if (that.$wrapper) {\n            that.$wrapper.remove();\n        }\n        $(that.options.$helpers).off(EVENT_NS);\n    },\n\n    /** This whole handler is needed to prevent blur event on textbox\n     * when suggestion is clicked (blur leads to suggestions hide, so we need to prevent it).\n     * See https://github.com/jquery/jquery-ui/blob/master/ui/autocomplete.js for details\n     */\n    onMousedown: function(e) {\n        var that = this;\n\n        // prevent moving focus out of the text field\n        e.preventDefault();\n\n        // IE doesn't prevent moving focus even with e.preventDefault()\n        // so we set a flag to know when we should ignore the blur event\n        that.cancelBlur = true;\n        utils.delay(function() {\n            delete that.cancelBlur;\n        });\n\n        // clicking on the scrollbar causes focus to shift to the body\n        // but we can't detect a mouseup or a click immediately afterward\n        // so we have to track the next mousedown and close the menu if\n        // the user clicks somewhere outside of the autocomplete\n        if ($(e.target).closest(\".ui-menu-item\").length == 0) {\n            utils.delay(function() {\n                $(document).one(\"mousedown\", function(e) {\n                    var $elements = that.el\n                        .add(that.$wrapper)\n                        .add(that.options.$helpers);\n\n                    if (that.options.floating) {\n                        $elements = $elements.add(that.$container);\n                    }\n\n                    $elements = $elements.filter(function() {\n                        return this === e.target || $.contains(this, e.target);\n                    });\n\n                    if (!$elements.length) {\n                        that.hide();\n                    }\n                });\n            });\n        }\n    },\n\n    bindWindowEvents: function() {\n        var handler = $.proxy(this.inferIsMobile, this);\n        this.$viewport.on(\"resize\" + EVENT_NS + this.uniqueId, handler);\n    },\n\n    unbindWindowEvents: function() {\n        this.$viewport.off(\"resize\" + EVENT_NS + this.uniqueId);\n    },\n\n    scrollToTop: function() {\n        var that = this,\n            scrollTarget = that.options.scrollOnFocus;\n\n        if (scrollTarget === true) {\n            scrollTarget = that.el;\n        }\n        if (scrollTarget instanceof $ && scrollTarget.length > 0) {\n            $(\"body,html\").animate(\n                {\n                    scrollTop: scrollTarget.offset().top\n                },\n                \"fast\"\n            );\n        }\n    },\n\n    // Configuration methods\n\n    setOptions: function(suppliedOptions) {\n        var that = this;\n\n        $.extend(that.options, suppliedOptions);\n\n        that[\"type\"] = types.get(that.options[\"type\"]);\n\n        // Check mandatory options\n        $.each(\n            {\n                requestMode: requestModes\n            },\n            function(option, available) {\n                that[option] = available[that.options[option]];\n                if (!that[option]) {\n                    that.disable();\n                    throw \"`\" +\n                        option +\n                        \"` option is incorrect! Must be one of: \" +\n                        $.map(available, function(value, name) {\n                            return '\"' + name + '\"';\n                        }).join(\", \");\n                }\n            }\n        );\n\n        $(that.options.$helpers)\n            .off(EVENT_NS)\n            .on(\"mousedown\" + EVENT_NS, $.proxy(that.onMousedown, that));\n\n        if (that.isInitialized()) {\n            that.notify(\"setOptions\");\n        }\n    },\n\n    // Common public methods\n\n    inferIsMobile: function() {\n        this.isMobile = this.$viewport.width() <= this.options.mobileWidth;\n    },\n\n    clearCache: function() {\n        this.cachedResponse = {};\n        this.enrichmentCache = {};\n        this.badQueries = [];\n    },\n\n    clear: function() {\n        var that = this,\n            currentSelection = that.selection;\n\n        if (that.isInitialized()) {\n            that.clearCache();\n            that.currentValue = \"\";\n            that.selection = null;\n            that.hide();\n            that.suggestions = [];\n            that.el.val(\"\");\n            that.el.trigger(\"suggestions-clear\");\n            that.notify(\"clear\");\n            that.trigger(\"InvalidateSelection\", currentSelection);\n        }\n    },\n\n    disable: function() {\n        var that = this;\n\n        that.disabled = true;\n        that.abortRequest();\n        if (that.visible) {\n            that.hide();\n        }\n    },\n\n    enable: function() {\n        this.disabled = false;\n    },\n\n    isUnavailable: function() {\n        return this.disabled;\n    },\n\n    update: function() {\n        var that = this,\n            query = that.el.val();\n\n        if (that.isInitialized()) {\n            that.currentValue = query;\n            if (that.isQueryRequestable(query)) {\n                that.updateSuggestions(query);\n            } else {\n                that.hide();\n            }\n        }\n    },\n\n    setSuggestion: function(suggestion) {\n        var that = this,\n            data,\n            value;\n\n        if ($.isPlainObject(suggestion) && $.isPlainObject(suggestion.data)) {\n            suggestion = $.extend(true, {}, suggestion);\n\n            if (\n                that.isUnavailable() &&\n                that.initializer &&\n                that.initializer.state() === \"pending\"\n            ) {\n                that.initializer.resolve();\n                that.enable();\n            }\n\n            if (that.bounds.own.length) {\n                that.checkValueBounds(suggestion);\n                data = that.copyDataComponents(\n                    suggestion.data,\n                    that.bounds.all\n                );\n                if (suggestion.data.kladr_id) {\n                    data.kladr_id = that.getBoundedKladrId(\n                        suggestion.data.kladr_id,\n                        that.bounds.all\n                    );\n                }\n                suggestion.data = data;\n            }\n\n            that.selection = suggestion;\n\n            // `that.suggestions` required by `that.getSuggestionValue` and must be set before\n            that.suggestions = [suggestion];\n            value = that.getSuggestionValue(suggestion) || \"\";\n            that.currentValue = value;\n            that.el.val(value);\n            that.abortRequest();\n            that.el.trigger(\"suggestions-set\");\n        }\n    },\n\n    /**\n     * Fetch full object for current INPUT's value\n     * if no suitable object found, clean input element\n     */\n    fixData: function() {\n        var that = this,\n            fullQuery = that.extendedCurrentValue(),\n            currentValue = that.el.val(),\n            resolver = $.Deferred();\n\n        resolver\n            .done(function(suggestion) {\n                that.selectSuggestion(suggestion, 0, currentValue, {\n                    hasBeenEnriched: true\n                });\n                that.el.trigger(\"suggestions-fixdata\", suggestion);\n            })\n            .fail(function() {\n                that.selection = null;\n                that.el.trigger(\"suggestions-fixdata\");\n            });\n\n        if (that.isQueryRequestable(fullQuery)) {\n            that.currentValue = fullQuery;\n            that.getSuggestions(fullQuery, {\n                count: 1,\n                from_bound: null,\n                to_bound: null\n            })\n                .done(function(suggestions) {\n                    // data fetched\n                    var suggestion = suggestions[0];\n                    if (suggestion) {\n                        resolver.resolve(suggestion);\n                    } else {\n                        resolver.reject();\n                    }\n                })\n                .fail(function() {\n                    // no data fetched\n                    resolver.reject();\n                });\n        } else {\n            resolver.reject();\n        }\n    },\n\n    // Querying related methods\n\n    /**\n     * Looks up parent instances\n     * @returns {String} current value prepended by parents' values\n     */\n    extendedCurrentValue: function() {\n        var that = this,\n            parentInstance = that.getParentInstance(),\n            parentValue =\n                parentInstance && parentInstance.extendedCurrentValue(),\n            currentValue = $.trim(that.el.val());\n\n        return utils.compact([parentValue, currentValue]).join(\" \");\n    },\n\n    getAjaxParams: function(method, custom) {\n        var that = this,\n            token = $.trim(that.options.token),\n            partner = $.trim(that.options.partner),\n            serviceUrl = that.options.serviceUrl,\n            url = that.options.url,\n            serviceMethod = serviceMethods[method],\n            params = $.extend(\n                {\n                    timeout: that.options.timeout\n                },\n                serviceMethod.defaultParams\n            ),\n            headers = {};\n\n        if (url) {\n            serviceUrl = url;\n        } else {\n            if (!/\\/$/.test(serviceUrl)) {\n                serviceUrl += \"/\";\n            }\n            serviceUrl += method;\n            if (serviceMethod.addTypeInUrl) {\n                serviceUrl += \"/\" + that.type.urlSuffix;\n            }\n        }\n\n        serviceUrl = utils.fixURLProtocol(serviceUrl);\n\n        if ($.support.cors) {\n            // for XMLHttpRequest put token in header\n            if (token) {\n                headers[\"Authorization\"] = \"Token \" + token;\n            }\n            if (partner) {\n                headers[\"X-Partner\"] = partner;\n            }\n            headers[\"X-Version\"] = Suggestions.version;\n            if (!params.headers) {\n                params.headers = {};\n            }\n            if (!params.xhrFields) {\n                params.xhrFields = {};\n            }\n            $.extend(params.headers, that.options.headers, headers);\n            // server sets Access-Control-Allow-Origin: *\n            // which requires no credentials\n            params.xhrFields.withCredentials = false;\n        } else {\n            // for XDomainRequest put token into URL\n            if (token) {\n                headers[\"token\"] = token;\n            }\n            if (partner) {\n                headers[\"partner\"] = partner;\n            }\n            headers[\"version\"] = Suggestions.version;\n            serviceUrl = utils.addUrlParams(serviceUrl, headers);\n        }\n\n        params.url = serviceUrl;\n\n        return $.extend(params, custom);\n    },\n\n    isQueryRequestable: function(query) {\n        var that = this,\n            result;\n\n        result = query.length >= that.options.minChars;\n\n        if (result && that.type.isQueryRequestable) {\n            result = that.type.isQueryRequestable.call(that, query);\n        }\n\n        return result;\n    },\n\n    constructRequestParams: function(query, customParams) {\n        var that = this,\n            options = that.options,\n            params = $.isFunction(options.params)\n                ? options.params.call(that.element, query)\n                : $.extend({}, options.params);\n\n        if (that.type.constructRequestParams) {\n            $.extend(params, that.type.constructRequestParams.call(that));\n        }\n        $.each(that.notify(\"requestParams\"), function(i, hookParams) {\n            $.extend(params, hookParams);\n        });\n        params[options.paramName] = query;\n        if ($.isNumeric(options.count) && options.count > 0) {\n            params.count = options.count;\n        }\n        if (options.language) {\n            params.language = options.language;\n        }\n\n        return $.extend(params, customParams);\n    },\n\n    updateSuggestions: function(query) {\n        var that = this;\n\n        that.fetchPhase = that\n            .getSuggestions(query)\n            .done(function(suggestions) {\n                that.assignSuggestions(suggestions, query);\n            });\n    },\n\n    /**\n     * Get suggestions from cache or from server\n     * @param {String} query\n     * @param {Object} customParams parameters specified here will be passed to request body\n     * @param {Object} requestOptions\n     * @param {Boolean} [requestOptions.noCallbacks]  flag, request competence callbacks will not be invoked\n     * @param {Boolean} [requestOptions.useEnrichmentCache]\n     * @return {$.Deferred} waiter which is to be resolved with suggestions as argument\n     */\n    getSuggestions: function(query, customParams, requestOptions) {\n        var response,\n            that = this,\n            options = that.options,\n            noCallbacks = requestOptions && requestOptions.noCallbacks,\n            useEnrichmentCache =\n                requestOptions && requestOptions.useEnrichmentCache,\n            method =\n                (requestOptions && requestOptions.method) ||\n                that.requestMode.method,\n            params = that.constructRequestParams(query, customParams),\n            cacheKey = $.param(params || {}),\n            resolver = $.Deferred();\n\n        response = that.cachedResponse[cacheKey];\n        if (response && $.isArray(response.suggestions)) {\n            resolver.resolve(response.suggestions);\n        } else {\n            if (that.isBadQuery(query)) {\n                resolver.reject();\n            } else {\n                if (\n                    !noCallbacks &&\n                    options.onSearchStart.call(that.element, params) === false\n                ) {\n                    resolver.reject();\n                } else {\n                    that.doGetSuggestions(params, method)\n                        .done(function(response) {\n                            // if response is correct and current value has not been changed\n                            if (\n                                that.processResponse(response) &&\n                                query == that.currentValue\n                            ) {\n                                // Cache results if cache is not disabled:\n                                if (!options.noCache) {\n                                    if (useEnrichmentCache) {\n                                        that.enrichmentCache[query] =\n                                            response.suggestions[0];\n                                    } else {\n                                        that.enrichResponse(response, query);\n                                        that.cachedResponse[\n                                            cacheKey\n                                        ] = response;\n                                        if (\n                                            options.preventBadQueries &&\n                                            response.suggestions.length === 0\n                                        ) {\n                                            that.badQueries.push(query);\n                                        }\n                                    }\n                                }\n\n                                resolver.resolve(response.suggestions);\n                            } else {\n                                resolver.reject();\n                            }\n                            if (!noCallbacks) {\n                                options.onSearchComplete.call(\n                                    that.element,\n                                    query,\n                                    response.suggestions\n                                );\n                            }\n                        })\n                        .fail(function(jqXHR, textStatus, errorThrown) {\n                            resolver.reject();\n                            if (!noCallbacks && textStatus !== \"abort\") {\n                                options.onSearchError.call(\n                                    that.element,\n                                    query,\n                                    jqXHR,\n                                    textStatus,\n                                    errorThrown\n                                );\n                            }\n                        });\n                }\n            }\n        }\n        return resolver;\n    },\n\n    /**\n     * Sends an AJAX request to server suggest method.\n     * @param {Object} params request params\n     * @returns {$.Deferred} response promise\n     */\n    doGetSuggestions: function(params, method) {\n        var that = this,\n            request = $.ajax(\n                that.getAjaxParams(method, { data: utils.serialize(params) })\n            );\n\n        that.abortRequest();\n        that.currentRequest = request;\n        that.notify(\"request\");\n\n        request.always(function() {\n            that.currentRequest = null;\n            that.notify(\"request\");\n        });\n\n        return request;\n    },\n\n    isBadQuery: function(q) {\n        if (!this.options.preventBadQueries) {\n            return false;\n        }\n\n        var result = false;\n        $.each(this.badQueries, function(i, query) {\n            return !(result = q.indexOf(query) === 0);\n        });\n        return result;\n    },\n\n    abortRequest: function() {\n        var that = this;\n\n        if (that.currentRequest) {\n            that.currentRequest.abort();\n        }\n    },\n\n    /**\n     * Checks response format and data\n     * @return {Boolean} response contains acceptable data\n     */\n    processResponse: function(response) {\n        var that = this,\n            suggestions;\n\n        if (!response || !$.isArray(response.suggestions)) {\n            return false;\n        }\n\n        that.verifySuggestionsFormat(response.suggestions);\n        that.setUnrestrictedValues(response.suggestions);\n\n        if ($.isFunction(that.options.onSuggestionsFetch)) {\n            suggestions = that.options.onSuggestionsFetch.call(\n                that.element,\n                response.suggestions\n            );\n            if ($.isArray(suggestions)) {\n                response.suggestions = suggestions;\n            }\n        }\n\n        return true;\n    },\n\n    verifySuggestionsFormat: function(suggestions) {\n        if (typeof suggestions[0] === \"string\") {\n            $.each(suggestions, function(i, value) {\n                suggestions[i] = { value: value, data: null };\n            });\n        }\n    },\n\n    /**\n     * Gets string to set as input value\n     *\n     * @param suggestion\n     * @param {Object} [selectionOptions]\n     * @param {boolean} selectionOptions.hasBeenEnriched\n     * @param {boolean} selectionOptions.hasSameValues\n     * @return {string}\n     */\n    getSuggestionValue: function(suggestion, selectionOptions) {\n        var that = this,\n            formatSelected =\n                that.options.formatSelected || that.type.formatSelected,\n            hasSameValues = selectionOptions && selectionOptions.hasSameValues,\n            hasBeenEnriched =\n                selectionOptions && selectionOptions.hasBeenEnriched,\n            formattedValue,\n            typeFormattedValue = null;\n\n        if ($.isFunction(formatSelected)) {\n            formattedValue = formatSelected.call(that, suggestion);\n        }\n\n        if (typeof formattedValue !== \"string\") {\n            formattedValue = suggestion.value;\n\n            if (that.type.getSuggestionValue) {\n                typeFormattedValue = that.type.getSuggestionValue(that, {\n                    suggestion: suggestion,\n                    hasSameValues: hasSameValues,\n                    hasBeenEnriched: hasBeenEnriched\n                });\n\n                if (typeFormattedValue !== null) {\n                    formattedValue = typeFormattedValue;\n                }\n            }\n        }\n\n        return formattedValue;\n    },\n\n    hasSameValues: function(suggestion) {\n        var hasSame = false;\n\n        $.each(this.suggestions, function(i, anotherSuggestion) {\n            if (\n                anotherSuggestion.value === suggestion.value &&\n                anotherSuggestion !== suggestion\n            ) {\n                hasSame = true;\n                return false;\n            }\n        });\n\n        return hasSame;\n    },\n\n    assignSuggestions: function(suggestions, query) {\n        var that = this;\n        that.suggestions = suggestions;\n        that.notify(\"assignSuggestions\", query);\n    },\n\n    shouldRestrictValues: function() {\n        var that = this;\n        // treat suggestions value as restricted only if there is one constraint\n        // and restrict_value is true\n        return (\n            that.options.restrict_value &&\n            that.constraints &&\n            Object.keys(that.constraints).length == 1\n        );\n    },\n\n    /**\n     * Fills suggestion.unrestricted_value property\n     */\n    setUnrestrictedValues: function(suggestions) {\n        var that = this,\n            shouldRestrict = that.shouldRestrictValues(),\n            label = that.getFirstConstraintLabel();\n\n        $.each(suggestions, function(i, suggestion) {\n            if (!suggestion.unrestricted_value) {\n                suggestion.unrestricted_value = shouldRestrict\n                    ? label + \", \" + suggestion.value\n                    : suggestion.value;\n            }\n        });\n    },\n\n    areSuggestionsSame: function(a, b) {\n        return a && b && a.value === b.value && utils.areSame(a.data, b.data);\n    },\n\n    getNoSuggestionsHint: function() {\n        var that = this;\n        if (that.options.noSuggestionsHint === false) {\n            return false;\n        }\n        return that.options.noSuggestionsHint || that.type.noSuggestionsHint;\n    }\n};\n\n/**\n * Methods related to INPUT's behavior\n */\n\nvar methods = {\n    setupElement: function() {\n        // Remove autocomplete attribute to prevent native suggestions:\n        this.el\n            // if it stops working, see https://stackoverflow.com/q/15738259\n            // chrome is constantly changing this logic\n            .attr(\"autocomplete\", \"new-password\")\n            .attr(\"autocorrect\", \"off\")\n            .attr(\"autocapitalize\", \"off\")\n            .attr(\"spellcheck\", \"false\")\n            .addClass(\"suggestions-input\")\n            .css(\"box-sizing\", \"border-box\");\n    },\n\n    bindElementEvents: function() {\n        var that = this;\n\n        that.el.on(\"keydown\" + EVENT_NS, $.proxy(that.onElementKeyDown, that));\n        // IE is buggy, it doesn't trigger `input` on text deletion, so use following events\n        that.el.on(\n            [\n                \"keyup\" + EVENT_NS,\n                \"cut\" + EVENT_NS,\n                \"paste\" + EVENT_NS,\n                \"input\" + EVENT_NS\n            ].join(\" \"),\n            $.proxy(that.onElementKeyUp, that)\n        );\n        that.el.on(\"blur\" + EVENT_NS, $.proxy(that.onElementBlur, that));\n        that.el.on(\"focus\" + EVENT_NS, $.proxy(that.onElementFocus, that));\n    },\n\n    unbindElementEvents: function() {\n        this.el.off(EVENT_NS);\n    },\n\n    onElementBlur: function() {\n        var that = this;\n\n        // suggestion was clicked, blur should be ignored\n        // see container mousedown handler\n        if (that.cancelBlur) {\n            that.cancelBlur = false;\n            return;\n        }\n\n        if (that.options.triggerSelectOnBlur) {\n            if (!that.isUnavailable()) {\n                that.selectCurrentValue({ noSpace: true }).always(function() {\n                    // For NAMEs selecting keeps suggestions list visible, so hide it\n                    that.hide();\n                });\n            }\n        } else {\n            that.hide();\n        }\n\n        if (that.fetchPhase.abort) {\n            that.fetchPhase.abort();\n        }\n    },\n\n    onElementFocus: function() {\n        var that = this;\n\n        if (!that.cancelFocus) {\n            // defer methods to allow browser update input's style before\n            utils.delay($.proxy(that.completeOnFocus, that));\n        }\n        that.cancelFocus = false;\n    },\n\n    onElementKeyDown: function(e) {\n        var that = this;\n\n        if (that.isUnavailable()) {\n            return;\n        }\n\n        if (!that.visible) {\n            switch (e.which) {\n                // If suggestions are hidden and user presses arrow down, display suggestions\n                case KEYS.DOWN:\n                    that.suggest();\n                    break;\n                // if no suggestions available and user pressed Enter\n                case KEYS.ENTER:\n                    if (that.options.triggerSelectOnEnter) {\n                        that.triggerOnSelectNothing();\n                    }\n                    break;\n            }\n            return;\n        }\n\n        switch (e.which) {\n            case KEYS.ESC:\n                that.el.val(that.currentValue);\n                that.hide();\n                that.abortRequest();\n                break;\n\n            case KEYS.TAB:\n                if (that.options.tabDisabled === false) {\n                    return;\n                }\n                break;\n\n            case KEYS.ENTER:\n                if (that.options.triggerSelectOnEnter) {\n                    that.selectCurrentValue();\n                }\n                break;\n\n            case KEYS.SPACE:\n                if (that.options.triggerSelectOnSpace && that.isCursorAtEnd()) {\n                    e.preventDefault();\n                    that.selectCurrentValue({\n                        continueSelecting: true,\n                        dontEnrich: true\n                    }).fail(function() {\n                        // If all data fetched but nothing selected\n                        that.currentValue += \" \";\n                        that.el.val(that.currentValue);\n                        that.proceedChangedValue();\n                    });\n                }\n                return;\n            case KEYS.UP:\n                that.moveUp();\n                break;\n            case KEYS.DOWN:\n                that.moveDown();\n                break;\n            default:\n                return;\n        }\n\n        // Cancel event if function did not return:\n        e.stopImmediatePropagation();\n        e.preventDefault();\n    },\n\n    onElementKeyUp: function(e) {\n        var that = this;\n\n        if (that.isUnavailable()) {\n            return;\n        }\n\n        switch (e.which) {\n            case KEYS.UP:\n            case KEYS.DOWN:\n            case KEYS.ENTER:\n                return;\n        }\n\n        // Cancel pending change\n        clearTimeout(that.onChangeTimeout);\n        that.inputPhase.reject();\n\n        if (that.currentValue !== that.el.val()) {\n            that.proceedChangedValue();\n        }\n    },\n\n    proceedChangedValue: function() {\n        var that = this;\n\n        // Cancel fetching, because it became obsolete\n        that.abortRequest();\n\n        that.inputPhase = $.Deferred().done($.proxy(that.onValueChange, that));\n\n        if (that.options.deferRequestBy > 0) {\n            // Defer lookup in case when value changes very quickly:\n            that.onChangeTimeout = utils.delay(function() {\n                that.inputPhase.resolve();\n            }, that.options.deferRequestBy);\n        } else {\n            that.inputPhase.resolve();\n        }\n    },\n\n    onValueChange: function() {\n        var that = this,\n            currentSelection;\n\n        if (that.selection) {\n            currentSelection = that.selection;\n            that.selection = null;\n            that.trigger(\"InvalidateSelection\", currentSelection);\n        }\n\n        that.selectedIndex = -1;\n\n        that.update();\n        that.notify(\"valueChange\");\n    },\n\n    completeOnFocus: function() {\n        var that = this;\n\n        if (that.isUnavailable()) {\n            return;\n        }\n\n        if (that.isElementFocused()) {\n            that.update();\n            if (that.isMobile) {\n                that.setCursorAtEnd();\n                that.scrollToTop();\n            }\n        }\n    },\n\n    isElementFocused: function() {\n        return document.activeElement === this.element;\n    },\n\n    isElementDisabled: function() {\n        return Boolean(\n            this.element.getAttribute(\"disabled\") ||\n                this.element.getAttribute(\"readonly\")\n        );\n    },\n\n    isCursorAtEnd: function() {\n        var that = this,\n            valLength = that.el.val().length,\n            selectionStart,\n            range;\n\n        // `selectionStart` and `selectionEnd` are not supported by some input types\n        try {\n            selectionStart = that.element.selectionStart;\n            if (typeof selectionStart === \"number\") {\n                return selectionStart === valLength;\n            }\n        } catch (ex) {}\n\n        if (document.selection) {\n            range = document.selection.createRange();\n            range.moveStart(\"character\", -valLength);\n            return valLength === range.text.length;\n        }\n        return true;\n    },\n\n    setCursorAtEnd: function() {\n        var element = this.element;\n\n        // `selectionStart` and `selectionEnd` are not supported by some input types\n        try {\n            element.selectionEnd = element.selectionStart =\n                element.value.length;\n            element.scrollLeft = element.scrollWidth;\n        } catch (ex) {\n            element.value = element.value;\n        }\n    }\n};\n\n$.extend(Suggestions.prototype, methods);\n\nnotificator\n    .on(\"initialize\", methods.bindElementEvents)\n    .on(\"dispose\", methods.unbindElementEvents);\n\n/**\n * Methods related to plugin's authorization on server\n */\n\n// keys are \"[type][token]\"\nvar statusRequests = {};\n\nfunction resetTokens() {\n    utils.each(statusRequests, function(req) {\n        req.abort();\n    });\n    statusRequests = {};\n}\n\nresetTokens();\n\nvar methods$1 = {\n    checkStatus: function() {\n        var that = this,\n            token = (that.options.token && that.options.token.trim()) || \"\",\n            requestKey = that.options.type + token,\n            request = statusRequests[requestKey];\n\n        if (!request) {\n            request = statusRequests[requestKey] = jqapi.ajax(\n                that.getAjaxParams(\"status\")\n            );\n        }\n\n        request\n            .done(function(status, textStatus, request) {\n                if (status.search) {\n                    var plan = request.getResponseHeader(\"X-Plan\");\n                    status.plan = plan;\n                    jqapi.extend(that.status, status);\n                } else {\n                    triggerError(\"Service Unavailable\");\n                }\n            })\n            .fail(function() {\n                triggerError(request.statusText);\n            });\n\n        function triggerError(errorThrown) {\n            // If unauthorized\n            if (utils.isFunction(that.options.onSearchError)) {\n                that.options.onSearchError.call(\n                    that.element,\n                    null,\n                    request,\n                    \"error\",\n                    errorThrown\n                );\n            }\n        }\n    }\n};\n\nSuggestions.resetTokens = resetTokens;\n\njqapi.extend(Suggestions.prototype, methods$1);\n\nnotificator.on(\"setOptions\", methods$1.checkStatus);\n\n//export { methods, resetTokens };\n\nvar locationRequest;\nvar defaultGeoLocation = true;\n\nfunction resetLocation() {\n    locationRequest = null;\n    DEFAULT_OPTIONS.geoLocation = defaultGeoLocation;\n}\n\nvar methods$2 = {\n    checkLocation: function() {\n        var that = this,\n            providedLocation = that.options.geoLocation;\n\n        if (!that.type.geoEnabled || !providedLocation) {\n            return;\n        }\n\n        that.geoLocation = $.Deferred();\n        if ($.isPlainObject(providedLocation) || $.isArray(providedLocation)) {\n            that.geoLocation.resolve(providedLocation);\n        } else {\n            if (!locationRequest) {\n                locationRequest = $.ajax(\n                    that.getAjaxParams(\"iplocate/address\")\n                );\n            }\n\n            locationRequest\n                .done(function(resp) {\n                    var locationData =\n                        resp && resp.location && resp.location.data;\n                    if (locationData && locationData.kladr_id) {\n                        that.geoLocation.resolve({\n                            kladr_id: locationData.kladr_id\n                        });\n                    } else {\n                        that.geoLocation.reject();\n                    }\n                })\n                .fail(function() {\n                    that.geoLocation.reject();\n                });\n        }\n    },\n\n    /**\n     * Public method to get `geoLocation` promise\n     * @returns {$.Deferred}\n     */\n    getGeoLocation: function() {\n        return this.geoLocation;\n    },\n\n    constructParams: function() {\n        var that = this,\n            params = {};\n\n        if (\n            that.geoLocation &&\n            $.isFunction(that.geoLocation.promise) &&\n            that.geoLocation.state() == \"resolved\"\n        ) {\n            that.geoLocation.done(function(locationData) {\n                params[\"locations_boost\"] = $.makeArray(locationData);\n            });\n        }\n\n        return params;\n    }\n};\n\n// Disable this feature when GET method used. See SUG-202\nif (utils.getDefaultType() != \"GET\") {\n    $.extend(DEFAULT_OPTIONS, {\n        geoLocation: defaultGeoLocation\n    });\n\n    $.extend(Suggestions, {\n        resetLocation: resetLocation\n    });\n\n    $.extend(Suggestions.prototype, {\n        getGeoLocation: methods$2.getGeoLocation\n    });\n\n    notificator\n        .on(\"setOptions\", methods$2.checkLocation)\n        .on(\"requestParams\", methods$2.constructParams);\n}\n\nvar methods$3 = {\n    enrichSuggestion: function(suggestion, selectionOptions) {\n        var that = this,\n            resolver = $.Deferred();\n\n        if (\n            !that.options.enrichmentEnabled ||\n            !that.type.enrichmentEnabled ||\n            !that.requestMode.enrichmentEnabled ||\n            (selectionOptions && selectionOptions.dontEnrich)\n        ) {\n            return resolver.resolve(suggestion);\n        }\n\n        // if current suggestion is already enriched, use it\n        if (suggestion.data && suggestion.data.qc != null) {\n            return resolver.resolve(suggestion);\n        }\n\n        that.disableDropdown();\n\n        var query = that.type.getEnrichmentQuery(suggestion);\n        var customParams = that.type.enrichmentParams;\n        var requestOptions = {\n            noCallbacks: true,\n            useEnrichmentCache: true,\n            method: that.type.enrichmentMethod\n        };\n\n        // Set `currentValue` to make `processResponse` to consider enrichment response valid\n        that.currentValue = query;\n\n        // prevent request abortion during onBlur\n        that.enrichPhase = that\n            .getSuggestions(query, customParams, requestOptions)\n            .always(function() {\n                that.enableDropdown();\n            })\n            .done(function(suggestions) {\n                var enrichedSuggestion = suggestions && suggestions[0];\n\n                resolver.resolve(\n                    enrichedSuggestion || suggestion,\n                    !!enrichedSuggestion\n                );\n            })\n            .fail(function() {\n                resolver.resolve(suggestion);\n            });\n\n        return resolver;\n    },\n\n    /**\n     * Injects enriched suggestion into response\n     * @param response\n     * @param query\n     */\n    enrichResponse: function(response, query) {\n        var that = this,\n            enrichedSuggestion = that.enrichmentCache[query];\n\n        if (enrichedSuggestion) {\n            $.each(response.suggestions, function(i, suggestion) {\n                if (suggestion.value === query) {\n                    response.suggestions[i] = enrichedSuggestion;\n                    return false;\n                }\n            });\n        }\n    }\n};\n\n$.extend(Suggestions.prototype, methods$3);\n\n/**\n * Methods related to suggestions dropdown list\n */\n\nfunction highlightMatches(chunks) {\n    return $.map(chunks, function(chunk) {\n        var text = utils.escapeHtml(chunk.text);\n\n        if (text && chunk.matched) {\n            text = \"<strong>\" + text + \"</strong>\";\n        }\n        return text;\n    }).join(\"\");\n}\n\nfunction nowrapLinkedParts(formattedStr, nowrapClass) {\n    var delimitedParts = formattedStr.split(\", \");\n    // string has no delimiters, should not wrap\n    if (delimitedParts.length === 1) {\n        return formattedStr;\n    }\n    // disable word-wrap inside delimited parts\n    return $.map(delimitedParts, function(part) {\n        return '<span class=\"' + nowrapClass + '\">' + part + \"</span>\";\n    }).join(\", \");\n}\n\nfunction hasAnotherSuggestion(suggestions, suggestion) {\n    var result = false;\n\n    $.each(suggestions, function(i, s) {\n        result = s.value == suggestion.value && s != suggestion;\n        if (result) {\n            return false;\n        }\n    });\n\n    return result;\n}\n\nvar optionsUsed = {\n    width: \"auto\",\n    floating: false\n};\n\nvar methods$4 = {\n    createContainer: function() {\n        var that = this,\n            suggestionSelector = \".\" + that.classes.suggestion,\n            options = that.options,\n            $container = $(\"<div/>\")\n                .addClass(options.containerClass)\n                .css({\n                    display: \"none\"\n                });\n\n        that.$container = $container;\n\n        $container.on(\n            \"click\" + EVENT_NS,\n            suggestionSelector,\n            $.proxy(that.onSuggestionClick, that)\n        );\n    },\n\n    showContainer: function() {\n        this.$container.appendTo(\n            this.options.floating ? this.$body : this.$wrapper\n        );\n    },\n\n    getContainer: function() {\n        return this.$container.get(0);\n    },\n\n    removeContainer: function() {\n        var that = this;\n\n        if (that.options.floating) {\n            that.$container.remove();\n        }\n    },\n\n    setContainerOptions: function() {\n        var that = this,\n            mousedownEvent = \"mousedown\" + EVENT_NS;\n\n        that.$container.off(mousedownEvent);\n        if (that.options.floating) {\n            that.$container.on(mousedownEvent, $.proxy(that.onMousedown, that));\n        }\n    },\n\n    /**\n     * Listen for click event on suggestions list:\n     */\n    onSuggestionClick: function(e) {\n        var that = this,\n            $el = $(e.target),\n            index;\n\n        if (!that.dropdownDisabled) {\n            that.cancelFocus = true;\n            that.el.focus();\n\n            while ($el.length && !(index = $el.attr(\"data-index\"))) {\n                $el = $el.closest(\".\" + that.classes.suggestion);\n            }\n\n            if (index && !isNaN(index)) {\n                that.select(+index);\n            }\n        }\n    },\n\n    // Dropdown UI methods\n\n    getSuggestionsItems: function() {\n        return this.$container.children(\".\" + this.classes.suggestion);\n    },\n\n    toggleDropdownEnabling: function(enable) {\n        this.dropdownDisabled = !enable;\n        this.$container.attr(\"disabled\", !enable);\n    },\n\n    disableDropdown: function() {\n        this.toggleDropdownEnabling(false);\n    },\n\n    enableDropdown: function() {\n        this.toggleDropdownEnabling(true);\n    },\n\n    /**\n     * Shows if there are any suggestions besides currently selected\n     * @returns {boolean}\n     */\n    hasSuggestionsToChoose: function() {\n        var that = this;\n\n        return (\n            that.suggestions.length > 1 ||\n            (that.suggestions.length === 1 &&\n                (!that.selection ||\n                    $.trim(that.suggestions[0].value) !==\n                        $.trim(that.selection.value)))\n        );\n    },\n\n    suggest: function() {\n        var that = this,\n            options = that.options,\n            formatResult,\n            html = [];\n\n        if (!that.requestMode.userSelect) {\n            return;\n        }\n\n        // если нечего показывать, то сообщаем об этом\n        if (!that.hasSuggestionsToChoose()) {\n            if (that.suggestions.length) {\n                that.hide();\n                return;\n            } else {\n                var noSuggestionsHint = that.getNoSuggestionsHint();\n                if (noSuggestionsHint) {\n                    html.push(\n                        '<div class=\"' +\n                            that.classes.hint +\n                            '\">' +\n                            noSuggestionsHint +\n                            \"</div>\"\n                    );\n                } else {\n                    that.hide();\n                    return;\n                }\n            }\n        } else {\n            // Build hint html\n            if (options.hint && that.suggestions.length) {\n                html.push(\n                    '<div class=\"' +\n                        that.classes.hint +\n                        '\">' +\n                        options.hint +\n                        \"</div>\"\n                );\n            }\n            that.selectedIndex = -1;\n            // Build suggestions inner HTML:\n            that.suggestions.forEach(function(suggestion, i) {\n                if (suggestion == that.selection) {\n                    that.selectedIndex = i;\n                }\n                that.buildSuggestionHtml(suggestion, i, html);\n            });\n        }\n\n        html.push('<div class=\"' + CLASSES.promo + '\"></div>');\n        html.push(\"</div>\");\n\n        that.$container.html(html.join(\"\"));\n\n        // Select first value by default:\n        if (options.autoSelectFirst && that.selectedIndex === -1) {\n            that.selectedIndex = 0;\n        }\n        if (that.selectedIndex !== -1) {\n            that.getSuggestionsItems()\n                .eq(that.selectedIndex)\n                .addClass(that.classes.selected);\n        }\n\n        if ($.isFunction(options.beforeRender)) {\n            options.beforeRender.call(that.element, that.$container);\n        }\n\n        that.$container.show();\n        that.visible = true;\n    },\n\n    buildSuggestionHtml: function(suggestion, ordinal, html) {\n        html.push(\n            '<div class=\"' +\n                this.classes.suggestion +\n                '\" data-index=\"' +\n                ordinal +\n                '\">'\n        );\n\n        var formatResult =\n            this.options.formatResult ||\n            this.type.formatResult ||\n            this.formatResult;\n        html.push(\n            formatResult.call(\n                this,\n                suggestion.value,\n                this.currentValue,\n                suggestion,\n                {\n                    unformattableTokens: this.type.unformattableTokens\n                }\n            )\n        );\n\n        var labels = this.makeSuggestionLabel(this.suggestions, suggestion);\n        if (labels) {\n            html.push(\n                '<span class=\"' +\n                    this.classes.subtext_label +\n                    '\">' +\n                    utils.escapeHtml(labels) +\n                    \"</span>\"\n            );\n        }\n        html.push(\"</div>\");\n    },\n\n    wrapFormattedValue: function(value, suggestion) {\n        var that = this,\n            status = utils.getDeepValue(suggestion.data, \"state.status\");\n\n        return (\n            '<span class=\"' +\n            that.classes.value +\n            '\"' +\n            (status ? ' data-suggestion-status=\"' + status + '\"' : \"\") +\n            \">\" +\n            value +\n            \"</span>\"\n        );\n    },\n\n    formatResult: function(value, currentValue, suggestion, options) {\n        var that = this;\n\n        value = that.highlightMatches(value, currentValue, suggestion, options);\n\n        return that.wrapFormattedValue(value, suggestion);\n    },\n\n    /**\n     * Makes HTML contents for suggestion item\n     * @param {String} value string to be displayed as a value\n     * @param {String} currentValue contents of the textbox\n     * @param suggestion whole suggestion object with displaying value and other fields\n     * @param {Object} [options] set of flags:\n     *          `unformattableTokens` - array of search tokens, that are not to be highlighted\n     *          `maxLength` - if set, `value` is limited by this length\n     * @returns {String} HTML to be inserted in the list\n     */\n    highlightMatches: function(value, currentValue, suggestion, options) {\n        var that = this,\n            chunks = [],\n            unformattableTokens = options && options.unformattableTokens,\n            maxLength = options && options.maxLength,\n            tokens,\n            tokenMatchers,\n            preferredTokens,\n            rWords = utils.reWordExtractor(),\n            match,\n            word,\n            i,\n            chunk,\n            formattedStr;\n\n        if (!value) return \"\";\n\n        tokens = text_util.tokenize(currentValue, unformattableTokens);\n\n        tokenMatchers = $.map(tokens, function(token) {\n            return new RegExp(\n                \"^((.*)([\" +\n                    WORD_PARTS_DELIMITERS +\n                    \"]+))?\" +\n                    \"(\" +\n                    utils.escapeRegExChars(token) +\n                    \")\" +\n                    \"([^\" +\n                    WORD_PARTS_DELIMITERS +\n                    \"]*[\" +\n                    WORD_PARTS_DELIMITERS +\n                    \"]*)\",\n                \"i\"\n            );\n        });\n\n        // parse string by words\n        while ((match = rWords.exec(value)) && match[0]) {\n            word = match[1];\n            chunks.push({\n                text: word,\n\n                // upper case means a word is a name and can be highlighted even if presents in unformattableTokens\n                hasUpperCase: word.toLowerCase() !== word,\n                formatted: utils.formatToken(word),\n                matchable: true\n            });\n            if (match[2]) {\n                chunks.push({\n                    text: match[2]\n                });\n            }\n        }\n\n        // use simple loop because length can change\n        for (i = 0; i < chunks.length; i++) {\n            chunk = chunks[i];\n            if (\n                chunk.matchable &&\n                !chunk.matched &&\n                ($.inArray(chunk.formatted, unformattableTokens) === -1 ||\n                    chunk.hasUpperCase)\n            ) {\n                $.each(tokenMatchers, function(j, matcher) {\n                    var tokenMatch = matcher.exec(chunk.formatted),\n                        length,\n                        nextIndex = i + 1;\n\n                    if (tokenMatch) {\n                        tokenMatch = {\n                            before: tokenMatch[1] || \"\",\n                            beforeText: tokenMatch[2] || \"\",\n                            beforeDelimiter: tokenMatch[3] || \"\",\n                            text: tokenMatch[4] || \"\",\n                            after: tokenMatch[5] || \"\"\n                        };\n\n                        if (tokenMatch.before) {\n                            // insert chunk before current\n                            chunks.splice(\n                                i,\n                                0,\n                                {\n                                    text: chunk.text.substr(\n                                        0,\n                                        tokenMatch.beforeText.length\n                                    ),\n                                    formatted: tokenMatch.beforeText,\n                                    matchable: true\n                                },\n                                {\n                                    text: tokenMatch.beforeDelimiter\n                                }\n                            );\n                            nextIndex += 2;\n\n                            length = tokenMatch.before.length;\n                            chunk.text = chunk.text.substr(length);\n                            chunk.formatted = chunk.formatted.substr(length);\n                            i--;\n                        }\n\n                        length =\n                            tokenMatch.text.length + tokenMatch.after.length;\n                        if (chunk.formatted.length > length) {\n                            chunks.splice(nextIndex, 0, {\n                                text: chunk.text.substr(length),\n                                formatted: chunk.formatted.substr(length),\n                                matchable: true\n                            });\n                            chunk.text = chunk.text.substr(0, length);\n                            chunk.formatted = chunk.formatted.substr(0, length);\n                        }\n\n                        if (tokenMatch.after) {\n                            length = tokenMatch.text.length;\n                            chunks.splice(nextIndex, 0, {\n                                text: chunk.text.substr(length),\n                                formatted: chunk.formatted.substr(length)\n                            });\n                            chunk.text = chunk.text.substr(0, length);\n                            chunk.formatted = chunk.formatted.substr(0, length);\n                        }\n                        chunk.matched = true;\n                        return false;\n                    }\n                });\n            }\n        }\n\n        if (maxLength) {\n            for (i = 0; i < chunks.length && maxLength >= 0; i++) {\n                chunk = chunks[i];\n                maxLength -= chunk.text.length;\n                if (maxLength < 0) {\n                    chunk.text =\n                        chunk.text.substr(0, chunk.text.length + maxLength) +\n                        \"...\";\n                }\n            }\n            chunks.length = i;\n        }\n\n        formattedStr = highlightMatches(chunks);\n        return nowrapLinkedParts(formattedStr, that.classes.nowrap);\n    },\n\n    makeSuggestionLabel: function(suggestions, suggestion) {\n        var that = this,\n            fieldNames = that.type.fieldNames,\n            nameData = {},\n            rWords = utils.reWordExtractor(),\n            match,\n            word,\n            labels = [];\n\n        if (\n            fieldNames &&\n            hasAnotherSuggestion(suggestions, suggestion) &&\n            suggestion.data\n        ) {\n            $.each(fieldNames, function(field) {\n                var value = suggestion.data[field];\n                if (value) {\n                    nameData[field] = utils.formatToken(value);\n                }\n            });\n\n            if (!$.isEmptyObject(nameData)) {\n                while (\n                    (match = rWords.exec(\n                        utils.formatToken(suggestion.value)\n                    )) &&\n                    (word = match[1])\n                ) {\n                    $.each(nameData, function(i, value) {\n                        if (value == word) {\n                            labels.push(fieldNames[i]);\n                            delete nameData[i];\n                            return false;\n                        }\n                    });\n                }\n\n                if (labels.length) {\n                    return labels.join(\", \");\n                }\n            }\n        }\n    },\n\n    hide: function() {\n        var that = this;\n        that.visible = false;\n        that.selectedIndex = -1;\n        that.$container.hide().empty();\n    },\n\n    activate: function(index) {\n        var that = this,\n            $activeItem,\n            selected = that.classes.selected,\n            $children;\n\n        if (!that.dropdownDisabled) {\n            $children = that.getSuggestionsItems();\n\n            $children.removeClass(selected);\n\n            that.selectedIndex = index;\n\n            if (\n                that.selectedIndex !== -1 &&\n                $children.length > that.selectedIndex\n            ) {\n                $activeItem = $children.eq(that.selectedIndex);\n                $activeItem.addClass(selected);\n                return $activeItem;\n            }\n        }\n\n        return null;\n    },\n\n    deactivate: function(restoreValue) {\n        var that = this;\n\n        if (!that.dropdownDisabled) {\n            that.selectedIndex = -1;\n            that.getSuggestionsItems().removeClass(that.classes.selected);\n            if (restoreValue) {\n                that.el.val(that.currentValue);\n            }\n        }\n    },\n\n    moveUp: function() {\n        var that = this;\n\n        if (that.dropdownDisabled) {\n            return;\n        }\n        if (that.selectedIndex === -1) {\n            if (that.suggestions.length) {\n                that.adjustScroll(that.suggestions.length - 1);\n            }\n            return;\n        }\n\n        if (that.selectedIndex === 0) {\n            that.deactivate(true);\n            return;\n        }\n\n        that.adjustScroll(that.selectedIndex - 1);\n    },\n\n    moveDown: function() {\n        var that = this;\n\n        if (that.dropdownDisabled) {\n            return;\n        }\n        if (that.selectedIndex === that.suggestions.length - 1) {\n            that.deactivate(true);\n            return;\n        }\n\n        that.adjustScroll(that.selectedIndex + 1);\n    },\n\n    adjustScroll: function(index) {\n        var that = this,\n            $activeItem = that.activate(index),\n            itemTop,\n            itemBottom,\n            scrollTop = that.$container.scrollTop(),\n            containerHeight;\n\n        if (!$activeItem || !$activeItem.length) {\n            return;\n        }\n\n        itemTop = $activeItem.position().top;\n        if (itemTop < 0) {\n            that.$container.scrollTop(scrollTop + itemTop);\n        } else {\n            itemBottom = itemTop + $activeItem.outerHeight();\n            containerHeight = that.$container.innerHeight();\n            if (itemBottom > containerHeight) {\n                that.$container.scrollTop(\n                    scrollTop - containerHeight + itemBottom\n                );\n            }\n        }\n\n        that.el.val(that.suggestions[index].value);\n    }\n};\n\n$.extend(DEFAULT_OPTIONS, optionsUsed);\n\n$.extend(Suggestions.prototype, methods$4);\n\nnotificator\n    .on(\"initialize\", methods$4.createContainer)\n    .on(\"dispose\", methods$4.removeContainer)\n    .on(\"setOptions\", methods$4.setContainerOptions)\n    .on(\"ready\", methods$4.showContainer)\n    .on(\"assignSuggestions\", methods$4.suggest);\n\n/**\n * Methods related to CONSTRAINTS component\n */\nvar optionsUsed$1 = {\n    constraints: null,\n    restrict_value: false\n};\n\nvar fiasParamNames = [\n    \"country_iso_code\",\n    \"region_iso_code\",\n    \"region_fias_id\",\n    \"area_fias_id\",\n    \"city_fias_id\",\n    \"city_district_fias_id\",\n    \"settlement_fias_id\",\n    \"planning_structure_fias_id\",\n    \"street_fias_id\"\n];\n\n/**\n * Compares two suggestion objects\n * @param suggestion\n * @param instance other Suggestions instance\n */\nfunction belongsToArea(suggestion, instance) {\n    var parentSuggestion = instance.selection,\n        result = parentSuggestion && parentSuggestion.data && instance.bounds;\n\n    if (result) {\n        collection_util.each(instance.bounds.all, function(bound, i) {\n            return (result =\n                parentSuggestion.data[bound] === suggestion.data[bound]);\n        });\n    }\n    return result;\n}\n\n/**\n * Возвращает КЛАДР-код, обрезанный до последнего непустого уровня\n * 50 000 040 000 00 → 50 000 040\n * @param kladr_id\n * @returns {string}\n */\nfunction getSignificantKladrId(kladr_id) {\n    var significantKladrId = kladr_id.replace(/^(\\d{2})(\\d*?)(0+)$/g, \"$1$2\");\n    var length = significantKladrId.length;\n    var significantLength = -1;\n    if (length <= 2) {\n        significantLength = 2;\n    } else if (length > 2 && length <= 5) {\n        significantLength = 5;\n    } else if (length > 5 && length <= 8) {\n        significantLength = 8;\n    } else if (length > 8 && length <= 11) {\n        significantLength = 11;\n    } else if (length > 11 && length <= 15) {\n        significantLength = 15;\n    } else if (length > 15) {\n        significantLength = 19;\n    }\n    return text_util.padEnd(significantKladrId, significantLength, \"0\");\n}\n\n/**\n * @param {Object} data  fields\n * @param {Suggestions} instance\n * @constructor\n */\nvar ConstraintLocation = function(data, instance) {\n    var that = this,\n        fieldNames,\n        fiasFieldNames,\n        fiasFields = {};\n\n    that.instance = instance;\n    that.fields = {};\n    that.specificity = -1;\n\n    if (lang_util.isPlainObject(data) && instance.type.dataComponents) {\n        collection_util.each(instance.type.dataComponents, function(\n            component,\n            i\n        ) {\n            var fieldName = component.id;\n\n            if (component.forLocations && data[fieldName]) {\n                that.fields[fieldName] = data[fieldName];\n                that.specificity = i;\n            }\n        });\n    }\n\n    fieldNames = Object.keys(that.fields);\n    fiasFieldNames = collection_util.intersect(fieldNames, fiasParamNames);\n    if (fiasFieldNames.length) {\n        collection_util.each(fiasFieldNames, function(fieldName, index) {\n            fiasFields[fieldName] = that.fields[fieldName];\n        });\n        that.fields = fiasFields;\n        that.specificity = that.getFiasSpecificity(fiasFieldNames);\n    } else if (that.fields.kladr_id) {\n        that.fields = { kladr_id: that.fields.kladr_id };\n        that.significantKladr = getSignificantKladrId(that.fields.kladr_id);\n        that.specificity = that.getKladrSpecificity(that.significantKladr);\n    }\n};\n\njqapi.extend(ConstraintLocation.prototype, {\n    getLabel: function() {\n        return this.instance.type.composeValue(this.fields, {\n            saveCityDistrict: true\n        });\n    },\n\n    getFields: function() {\n        return this.fields;\n    },\n\n    isValid: function() {\n        return !lang_util.isEmptyObject(this.fields);\n    },\n\n    /**\n     * Возвращает specificity для КЛАДР\n     * Описание ниже, в getFiasSpecificity\n     * @param kladr_id\n     * @returns {number}\n     */\n    getKladrSpecificity: function(kladr_id) {\n        var specificity = -1;\n        var kladrLength = kladr_id.length;\n\n        collection_util.each(this.instance.type.dataComponents, function(\n            component,\n            i\n        ) {\n            if (\n                component.kladrFormat &&\n                kladrLength === component.kladrFormat.digits\n            ) {\n                specificity = i;\n            }\n        });\n\n        return specificity;\n    },\n\n    /**\n     * Возвращает особую величину specificity для ФИАС\n     * Specificity это индекс для массива this.instance.type.dataComponents\n     * до которого (включительно) обрежется этот массив при формировании строки адреса.\n     * Этот параметр нужен для случаев, когда в настройках плагина restrict_value = true\n     * Например, установлено ограничение (locations) по region_fias_id (Краснодарский край)\n     * В выпадашке нажимаем на \"г. Сочи\"\n     * Если restrict_value отключен, то выведется значение \"Краснодарский край, г Сочи\"\n     * Если включен, то просто \"г Сочи\"\n     *\n     * @param fiasFieldNames\n     * @returns {number}\n     */\n    getFiasSpecificity: function(fiasFieldNames) {\n        var specificity = -1;\n\n        collection_util.each(this.instance.type.dataComponents, function(\n            component,\n            i\n        ) {\n            if (\n                component.fiasType &&\n                fiasFieldNames.indexOf(component.fiasType) > -1 &&\n                specificity < i\n            ) {\n                specificity = i;\n            }\n        });\n\n        return specificity;\n    },\n\n    containsData: function(data) {\n        var result = true;\n\n        if (this.fields.kladr_id) {\n            return (\n                !!data.kladr_id &&\n                data.kladr_id.indexOf(this.significantKladr) === 0\n            );\n        } else {\n            collection_util.each(this.fields, function(value, fieldName) {\n                return (result =\n                    !!data[fieldName] &&\n                    data[fieldName].toLowerCase() === value.toLowerCase());\n            });\n\n            return result;\n        }\n    }\n});\n\nSuggestions.ConstraintLocation = ConstraintLocation;\n\n/**\n * @param {Object} data\n * @param {Object|Array} data.locations\n * @param {string} [data.label]\n * @param {boolean} [data.deletable]\n * @param {Suggestions} [instance]\n * @constructor\n */\nvar Constraint = function(data, instance) {\n    this.id = generateId(\"c\");\n    this.deletable = !!data.deletable;\n    this.instance = instance;\n\n    var locationsArray = collection_util.makeArray(\n        data && (data.locations || data.restrictions)\n    );\n    this.locations = locationsArray.map(function(data) {\n        return new ConstraintLocation(data, instance);\n    });\n\n    this.locations = this.locations.filter(function(location) {\n        return location.isValid();\n    });\n\n    this.label = data.label;\n    if (this.label == null && instance.type.composeValue) {\n        this.label = this.locations\n            .map(function(location) {\n                return location.getLabel();\n            })\n            .join(\", \");\n    }\n};\n\njqapi.extend(Constraint.prototype, {\n    isValid: function() {\n        return this.locations.length > 0;\n    },\n    getFields: function() {\n        return this.locations.map(function(location) {\n            return location.getFields();\n        });\n    }\n});\n\nvar methods$5 = {\n    createConstraints: function() {\n        var that = this;\n        that.constraints = {};\n    },\n    setupConstraints: function() {\n        var that = this,\n            constraints = that.options.constraints,\n            $parent;\n\n        if (!constraints) {\n            that.unbindFromParent();\n            return;\n        }\n\n        if (\n            jqapi.isJqObject(constraints) ||\n            typeof constraints === \"string\" ||\n            typeof constraints.nodeType === \"number\"\n        ) {\n            $parent = jqapi.select(constraints);\n            if (!$parent.is(that.constraints)) {\n                that.unbindFromParent();\n                if (!$parent.is(that.el)) {\n                    that.constraints = $parent;\n                    that.bindToParent();\n                }\n            }\n        } else {\n            collection_util.each(that.constraints, function(_, id) {\n                that.removeConstraint(id);\n            });\n            collection_util.each(\n                collection_util.makeArray(constraints),\n                function(constraint, i) {\n                    that.addConstraint(constraint);\n                }\n            );\n        }\n    },\n\n    filteredLocation: function(data) {\n        var locationComponents = [],\n            location = {};\n\n        collection_util.each(this.type.dataComponents, function() {\n            if (this.forLocations) locationComponents.push(this.id);\n        });\n\n        if (lang_util.isPlainObject(data)) {\n            // Copy to location only allowed fields\n            collection_util.each(data, function(value, key) {\n                if (value && locationComponents.indexOf(key) >= 0) {\n                    location[key] = value;\n                }\n            });\n        }\n\n        if (!lang_util.isEmptyObject(location)) {\n            return location.kladr_id\n                ? { kladr_id: location.kladr_id }\n                : location;\n        }\n    },\n\n    addConstraint: function(constraint) {\n        var that = this;\n\n        constraint = new Constraint(constraint, that);\n\n        if (constraint.isValid()) {\n            that.constraints[constraint.id] = constraint;\n        }\n    },\n\n    removeConstraint: function(id) {\n        var that = this;\n        delete that.constraints[id];\n    },\n\n    constructConstraintsParams: function() {\n        var that = this,\n            locations = [],\n            constraints = that.constraints,\n            parentInstance,\n            parentData,\n            params = {};\n\n        while (\n            jqapi.isJqObject(constraints) &&\n            (parentInstance = constraints.suggestions()) &&\n            !(parentData = object_util.getDeepValue(\n                parentInstance,\n                \"selection.data\"\n            ))\n        ) {\n            constraints = parentInstance.constraints;\n        }\n\n        if (jqapi.isJqObject(constraints)) {\n            parentData = new ConstraintLocation(\n                parentData,\n                parentInstance\n            ).getFields();\n\n            if (parentData) {\n                // if send city_fias_id for city request\n                // then no cities will responded\n                if (that.bounds.own.indexOf(\"city\") > -1) {\n                    delete parentData.city_fias_id;\n                }\n                params.locations = [parentData];\n                params.restrict_value = true;\n            }\n        } else {\n            if (constraints) {\n                collection_util.each(constraints, function(constraint, id) {\n                    locations = locations.concat(constraint.getFields());\n                });\n\n                if (locations.length) {\n                    params.locations = locations;\n                    params.restrict_value = that.options.restrict_value;\n                }\n            }\n        }\n\n        return params;\n    },\n\n    /**\n     * Returns label of the first constraint (if any), empty string otherwise\n     * @returns {String}\n     */\n    getFirstConstraintLabel: function() {\n        var that = this,\n            constraints_id =\n                lang_util.isPlainObject(that.constraints) &&\n                Object.keys(that.constraints)[0];\n\n        return constraints_id ? that.constraints[constraints_id].label : \"\";\n    },\n\n    bindToParent: function() {\n        var that = this;\n\n        that.constraints\n            .on(\n                [\n                    \"suggestions-select.\" + that.uniqueId,\n                    \"suggestions-invalidateselection.\" + that.uniqueId,\n                    \"suggestions-clear.\" + that.uniqueId\n                ].join(\" \"),\n                jqapi.proxy(that.onParentSelectionChanged, that)\n            )\n            .on(\n                \"suggestions-dispose.\" + that.uniqueId,\n                jqapi.proxy(that.onParentDispose, that)\n            );\n    },\n\n    unbindFromParent: function() {\n        var that = this,\n            $parent = that.constraints;\n\n        if (jqapi.isJqObject($parent)) {\n            $parent.off(\".\" + that.uniqueId);\n        }\n    },\n\n    onParentSelectionChanged: function(e, suggestion, valueChanged) {\n        // Don't clear if parent has been just enriched\n        if (e.type !== \"suggestions-select\" || valueChanged) {\n            this.clear();\n        }\n    },\n\n    onParentDispose: function(e) {\n        this.unbindFromParent();\n    },\n\n    getParentInstance: function() {\n        return (\n            jqapi.isJqObject(this.constraints) && this.constraints.suggestions()\n        );\n    },\n\n    shareWithParent: function(suggestion) {\n        // that is the parent control's instance\n        var that = this.getParentInstance();\n\n        if (\n            !that ||\n            that.type !== this.type ||\n            belongsToArea(suggestion, that)\n        ) {\n            return;\n        }\n\n        that.shareWithParent(suggestion);\n        that.setSuggestion(suggestion);\n    },\n\n    /**\n     * Pick only fields that absent in restriction\n     */\n    getUnrestrictedData: function(data) {\n        var that = this,\n            restrictedKeys = [],\n            unrestrictedData = {},\n            maxSpecificity = -1;\n\n        // Find most specific location that could restrict current data\n        collection_util.each(that.constraints, function(constraint, id) {\n            collection_util.each(constraint.locations, function(location, i) {\n                if (\n                    location.containsData(data) &&\n                    location.specificity > maxSpecificity\n                ) {\n                    maxSpecificity = location.specificity;\n                }\n            });\n        });\n\n        if (maxSpecificity >= 0) {\n            // Для городов-регионов нужно также отсечь и город\n            if (\n                data.region_kladr_id &&\n                data.region_kladr_id === data.city_kladr_id\n            ) {\n                restrictedKeys.push.apply(\n                    restrictedKeys,\n                    that.type.dataComponentsById[\"city\"].fields\n                );\n            }\n\n            // Collect all fieldnames from all restricted components\n            collection_util.each(\n                that.type.dataComponents.slice(0, maxSpecificity + 1),\n                function(component, i) {\n                    restrictedKeys.push.apply(restrictedKeys, component.fields);\n                }\n            );\n\n            // Copy skipping restricted fields\n            collection_util.each(data, function(value, key) {\n                if (restrictedKeys.indexOf(key) === -1) {\n                    unrestrictedData[key] = value;\n                }\n            });\n        } else {\n            unrestrictedData = data;\n        }\n\n        return unrestrictedData;\n    }\n};\n\njqapi.extend(DEFAULT_OPTIONS, optionsUsed$1);\n\njqapi.extend(Suggestions.prototype, methods$5);\n\n// Disable this feature when GET method used. See SUG-202\nif (ajax.getDefaultType() != \"GET\") {\n    notificator\n        .on(\"initialize\", methods$5.createConstraints)\n        .on(\"setOptions\", methods$5.setupConstraints)\n        .on(\"requestParams\", methods$5.constructConstraintsParams)\n        .on(\"dispose\", methods$5.unbindFromParent);\n}\n\n/**\n * Methods for selecting a suggestion\n */\n\nvar methods$6 = {\n    proceedQuery: function(query) {\n        var that = this;\n\n        if (query.length >= that.options.minChars) {\n            that.updateSuggestions(query);\n        } else {\n            that.hide();\n        }\n    },\n\n    /**\n     * Selects current or first matched suggestion, but firstly waits for data ready\n     * @param selectionOptions\n     * @returns {$.Deferred} promise, resolved with index of selected suggestion or rejected if nothing matched\n     */\n    selectCurrentValue: function(selectionOptions) {\n        var that = this,\n            result = jqapi.Deferred();\n\n        // force onValueChange to be executed if it has been deferred\n        that.inputPhase.resolve();\n\n        that.fetchPhase\n            .done(function() {\n                var index;\n\n                // When suggestion has already been selected and not modified\n                if (that.selection && !that.visible) {\n                    result.reject();\n                } else {\n                    index = that.findSuggestionIndex();\n\n                    that.select(index, selectionOptions);\n\n                    if (index === -1) {\n                        result.reject();\n                    } else {\n                        result.resolve(index);\n                    }\n                }\n            })\n            .fail(function() {\n                result.reject();\n            });\n\n        return result;\n    },\n\n    /**\n     * Selects first when user interaction is not supposed\n     */\n    selectFoundSuggestion: function() {\n        var that = this;\n\n        if (!that.requestMode.userSelect) {\n            that.select(0);\n        }\n    },\n\n    /**\n     * Selects current or first matched suggestion\n     * @returns {number} index of found suggestion\n     */\n    findSuggestionIndex: function() {\n        var that = this,\n            index = that.selectedIndex,\n            value;\n\n        if (index === -1) {\n            // matchers always operate with trimmed strings\n            value = that.el.val().trim();\n            if (value) {\n                that.type.matchers.some(function(matcher) {\n                    index = matcher(value, that.suggestions);\n                    return index !== -1;\n                });\n            }\n        }\n\n        return index;\n    },\n\n    /**\n     * Selects a suggestion at specified index\n     * @param index index of suggestion to select. Can be -1\n     * @param {Object} selectionOptions\n     * @param {boolean} [selectionOptions.continueSelecting]  prevents hiding after selection\n     * @param {boolean} [selectionOptions.noSpace]  prevents adding space at the end of current value\n     */\n    select: function(index, selectionOptions) {\n        var that = this,\n            suggestion = that.suggestions[index],\n            continueSelecting =\n                selectionOptions && selectionOptions.continueSelecting,\n            currentValue = that.currentValue,\n            hasSameValues;\n\n        // Prevent recursive execution\n        if (that.triggering[\"Select\"]) return;\n\n        // if no suggestion to select\n        if (!suggestion) {\n            if (!continueSelecting && !that.selection) {\n                that.triggerOnSelectNothing();\n            }\n            that.onSelectComplete(continueSelecting);\n            return;\n        }\n\n        hasSameValues = that.hasSameValues(suggestion);\n\n        that.enrichSuggestion(suggestion, selectionOptions).done(function(\n            enrichedSuggestion,\n            hasBeenEnriched\n        ) {\n            var newSelectionOptions = jqapi.extend(\n                {\n                    hasBeenEnriched: hasBeenEnriched,\n                    hasSameValues: hasSameValues\n                },\n                selectionOptions\n            );\n            that.selectSuggestion(\n                enrichedSuggestion,\n                index,\n                currentValue,\n                newSelectionOptions\n            );\n        });\n    },\n\n    /**\n     * Formats and selects final (enriched) suggestion\n     * @param suggestion\n     * @param index\n     * @param lastValue\n     * @param {Object} selectionOptions\n     * @param {boolean} [selectionOptions.continueSelecting]  prevents hiding after selection\n     * @param {boolean} [selectionOptions.noSpace]  prevents adding space at the end of current value\n     * @param {boolean} selectionOptions.hasBeenEnriched\n     * @param {boolean} selectionOptions.hasSameValues\n     */\n    selectSuggestion: function(suggestion, index, lastValue, selectionOptions) {\n        var that = this,\n            continueSelecting = selectionOptions.continueSelecting,\n            assumeDataComplete =\n                !that.type.isDataComplete ||\n                that.type.isDataComplete.call(that, suggestion),\n            currentSelection = that.selection;\n\n        // Prevent recursive execution\n        if (that.triggering[\"Select\"]) return;\n\n        if (that.type.alwaysContinueSelecting) {\n            continueSelecting = true;\n        }\n\n        if (assumeDataComplete) {\n            continueSelecting = false;\n        }\n\n        // `suggestions` cat be empty, e.g. during `fixData`\n        if (selectionOptions.hasBeenEnriched && that.suggestions[index]) {\n            that.suggestions[index].data = suggestion.data;\n        }\n\n        if (that.requestMode.updateValue) {\n            that.checkValueBounds(suggestion);\n            that.currentValue = that.getSuggestionValue(\n                suggestion,\n                selectionOptions\n            );\n\n            if (\n                that.currentValue &&\n                !selectionOptions.noSpace &&\n                !assumeDataComplete\n            ) {\n                that.currentValue += \" \";\n            }\n            that.el.val(that.currentValue);\n        }\n\n        if (that.currentValue) {\n            that.selection = suggestion;\n            if (!that.areSuggestionsSame(suggestion, currentSelection)) {\n                that.trigger(\n                    \"Select\",\n                    suggestion,\n                    that.currentValue != lastValue\n                );\n            }\n            if (that.requestMode.userSelect) {\n                that.onSelectComplete(continueSelecting);\n            }\n        } else {\n            that.selection = null;\n            that.triggerOnSelectNothing();\n        }\n\n        that.shareWithParent(suggestion);\n    },\n\n    onSelectComplete: function(continueSelecting) {\n        var that = this;\n\n        if (continueSelecting) {\n            that.selectedIndex = -1;\n            that.updateSuggestions(that.currentValue);\n        } else {\n            that.hide();\n        }\n    },\n\n    triggerOnSelectNothing: function() {\n        var that = this;\n\n        if (!that.triggering[\"SelectNothing\"]) {\n            that.trigger(\"SelectNothing\", that.currentValue);\n        }\n    },\n\n    trigger: function(event) {\n        var that = this,\n            args = utils.slice(arguments, 1),\n            callback = that.options[\"on\" + event];\n\n        that.triggering[event] = true;\n        if (utils.isFunction(callback)) {\n            callback.apply(that.element, args);\n        }\n        that.el.trigger.call(\n            that.el,\n            \"suggestions-\" + event.toLowerCase(),\n            args\n        );\n        that.triggering[event] = false;\n    }\n};\n\njqapi.extend(Suggestions.prototype, methods$6);\n\nnotificator.on(\"assignSuggestions\", methods$6.selectFoundSuggestion);\n\n/**\n * features for connected instances\n */\n\nvar optionsUsed$2 = {\n    bounds: null,\n};\n\nvar methods$7 = {\n    setupBounds: function() {\n        this.bounds = {\n            from: null,\n            to: null,\n        };\n    },\n\n    setBoundsOptions: function() {\n        var that = this,\n            boundsAvailable = [],\n            newBounds = $.trim(that.options.bounds).split(\"-\"),\n            boundFrom = newBounds[0],\n            boundTo = newBounds[newBounds.length - 1],\n            boundsOwn = [],\n            boundIsOwn,\n            boundsAll = [];\n\n        if (that.type.dataComponents) {\n            $.each(that.type.dataComponents, function() {\n                if (this.forBounds) {\n                    boundsAvailable.push(this.id);\n                }\n            });\n        }\n\n        if (boundsAvailable.indexOf(boundFrom) === -1) {\n            boundFrom = null;\n        }\n\n        if (boundsAvailable.indexOf(boundTo) === -1) {\n            boundTo = null;\n        }\n\n        if (boundFrom || boundTo) {\n            boundIsOwn = !boundFrom;\n            $.each(boundsAvailable, function(i, bound) {\n                if (bound == boundFrom) {\n                    boundIsOwn = true;\n                }\n                boundsAll.push(bound);\n                if (boundIsOwn) {\n                    boundsOwn.push(bound);\n                }\n                if (bound == boundTo) {\n                    return false;\n                }\n            });\n        }\n\n        that.bounds.from = boundFrom;\n        that.bounds.to = boundTo;\n        that.bounds.all = boundsAll;\n        that.bounds.own = boundsOwn;\n    },\n\n    constructBoundsParams: function() {\n        var that = this,\n            params = {};\n\n        if (that.bounds.from) {\n            params[\"from_bound\"] = { value: that.bounds.from };\n        }\n        if (that.bounds.to) {\n            params[\"to_bound\"] = { value: that.bounds.to };\n        }\n\n        return params;\n    },\n\n    /**\n     * Подстраивает suggestion.value под that.bounds.own\n     * Ничего не возвращает, меняет в самом suggestion\n     * @param suggestion\n     */\n    checkValueBounds: function(suggestion) {\n        var that = this,\n            valueData;\n\n        // If any bounds set up\n        if (that.bounds.own.length && that.type.composeValue) {\n            // делаем копию\n            var bounds = that.bounds.own.slice(0);\n            // если роль текущего инстанса плагина показывать только район города\n            // то для корректного формировния нужен city_district_fias_id\n            if (bounds.length === 1 && bounds[0] === \"city_district\") {\n                bounds.push(\"city_district_fias_id\");\n            }\n            valueData = that.copyDataComponents(suggestion.data, bounds);\n            suggestion.value = that.type.composeValue(valueData);\n        }\n    },\n\n    copyDataComponents: function(data, components) {\n        var result = {},\n            dataComponentsById = this.type.dataComponentsById;\n\n        if (dataComponentsById) {\n            $.each(components, function(i, component) {\n                $.each(dataComponentsById[component].fields, function(\n                    i,\n                    field\n                ) {\n                    if (data[field] != null) {\n                        result[field] = data[field];\n                    }\n                });\n            });\n        }\n\n        return result;\n    },\n\n    getBoundedKladrId: function(kladr_id, boundsRange) {\n        var boundTo = boundsRange[boundsRange.length - 1],\n            kladrFormat;\n\n        $.each(this.type.dataComponents, function(i, component) {\n            if (component.id === boundTo) {\n                kladrFormat = component.kladrFormat;\n                return false;\n            }\n        });\n\n        return (\n            kladr_id.substr(0, kladrFormat.digits) +\n            new Array((kladrFormat.zeros || 0) + 1).join(\"0\")\n        );\n    },\n};\n\n$.extend(DEFAULT_OPTIONS, optionsUsed$2);\n\n$.extend(Suggestions.prototype, methods$7);\n\nnotificator\n    .on(\"initialize\", methods$7.setupBounds)\n    .on(\"setOptions\", methods$7.setBoundsOptions)\n    .on(\"requestParams\", methods$7.constructBoundsParams);\n\n/**\n * Утилиты для работы с DOM.\n */\nvar dom = {\n    /**\n     * Выбрать первый элемент с указанным классом.\n     */\n    selectByClass: function(classname, parent) {\n        var selector = \".\" + classname;\n        if (parent) {\n            return parent.querySelector(selector);\n        } else {\n            return document.querySelector(selector);\n        }\n    },\n\n    /**\n     * Добавить элементу класс.\n     */\n    addClass: function(element, className) {\n        var list = element.className.split(\" \");\n        if (list.indexOf(className) === -1) {\n            list.push(className);\n        }\n        element.className = list.join(\" \");\n    },\n\n    /**\n     * Добавить элементу стиль.\n     */\n    setStyle: function(element, name, value) {\n        element.style[name] = value;\n    },\n\n    /**\n     * Подписаться на событие на элементе.\n     * @param {Element} element - элемент\n     * @param {string} eventName - название события\n     * @param {string} namespace - пространство имён события\n     * @param {Function} callback - функция-обработчик события\n     */\n    listenTo: function(element, eventName, namespace, callback) {\n        element.addEventListener(eventName, callback, false);\n        if (namespace) {\n            if (!eventsByNamespace[namespace]) {\n                eventsByNamespace[namespace] = [];\n            }\n            eventsByNamespace[namespace].push({\n                eventName: eventName,\n                element: element,\n                callback: callback\n            });\n        }\n    },\n\n    /**\n     * Отписаться от всех событий с указанным пространством имён.\n     */\n    stopListeningNamespace: function(namespace) {\n        var events = eventsByNamespace[namespace];\n        if (events) {\n            events.forEach(function(event) {\n                event.element.removeEventListener(\n                    event.eventName,\n                    event.callback,\n                    false\n                );\n            });\n        }\n    }\n};\n\n/**\n * Промо-ссылка в списке подсказок.\n */\nvar FREE_PLAN = \"FREE\";\nvar LINK =\n    \"https://dadata.ru/suggestions/?utm_source=dadata&utm_medium=module&utm_campaign=suggestions-jquery\";\nvar PREFIX = \"\";\nvar SUFFIX = \"\";\nvar IMAGE =\n    '<svg version=\"1.1\" viewBox=\"0 0 128 38\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m128 19v16.077c0 1.614-1.302 2.923-2.909 2.923h-122.18c-1.607 0-2.909-1.309-2.909-2.923v-32.154c-0-1.614 1.302-2.923 2.909-2.923h122.18c1.607 0 2.909 1.309 2.909 2.923z\" fill=\"#ef4741\"/><path d=\"m59.52 7.912h-8.902v22.098h9.92c3.724 0 9.872-0.341 9.872-6.703v-8.682c-0.01-6.372-7.166-6.713-10.89-6.713zm5.595 14.81c0 3.186-2.308 3.508-4.936 3.508h-4.276v-14.538h3.287c2.628 0 5.954 0.322 5.954 3.508zm-46.545-14.81h-8.834v22.098h9.871c3.724 0 9.872-0.341 9.872-6.703v-8.682c0-6.372-7.137-6.713-10.88-6.713zm5.595 14.81c0 3.186-2.308 3.508-4.936 3.508h-4.247v-14.538h3.258c2.628 0 5.954 0.322 5.954 3.508zm71.757-13.953h-4.945v16.301c-0.018 0.785 0.113 1.565 0.388 2.3 0.203 0.569 0.535 1.082 0.97 1.5 0.446 0.385 0.962 0.677 1.522 0.858 0.58 0.205 1.182 0.343 1.794 0.409 0.575 0.052 1.248 0.081 2.017 0.088 0.917-1e-3 1.834-0.057 2.744-0.166v-2.796h-1.765c-0.393 0.055-0.795 0.032-1.18-0.071-0.385-0.102-0.745-0.28-1.06-0.524-0.413-0.691-0.59-1.498-0.504-2.299v-8.068h4.509v-3.06h-4.509zm20.364 5.535c-1.176-0.741-3.278-1.108-6.303-1.101h-5.741v0.243l0.708 2.826h5.033c0.837-0.051 1.672 0.117 2.424 0.487 0.259 0.248 0.458 0.553 0.579 0.891 0.121 0.339 0.162 0.701 0.119 1.058v1.12h-5.527c-1.939 0-3.271 0.38-3.995 1.14-0.725 0.76-1.099 2.127-1.125 4.102 0 2.154 0.359 3.06 1.086 3.742 0.728 0.682 2.134 1.188 4.344 1.188h6.847c1.706 0 3.345-0.808 3.345-2.747v-8.584c0-2.176-0.589-3.635-1.765-4.375zm-3.19 12.959h-3.249c-0.735 0.081-1.478-0.036-2.152-0.342-0.285-0.227-0.427-0.876-0.427-1.948s0.136-1.741 0.407-2.007c0.625-0.331 1.336-0.46 2.037-0.371h3.384zm-26.667-12.959c-1.176-0.741-3.277-1.108-6.303-1.101h-5.741v0.243l0.708 2.826h5.033c0.836-0.051 1.672 0.117 2.424 0.487 0.259 0.248 0.457 0.553 0.578 0.891 0.121 0.339 0.162 0.701 0.12 1.058v1.12h-5.556c-1.939 0-3.271 0.38-3.995 1.14s-1.086 2.127-1.086 4.102c0 2.154 0.359 3.06 1.086 3.742s2.133 1.188 4.344 1.188h6.846c1.717 0 3.346-0.808 3.346-2.747v-8.584c-7e-3 -2.176-0.595-3.635-1.765-4.375zm-3.181 12.959h-3.248c-0.735 0.081-1.478-0.037-2.153-0.342-0.284-0.227-0.426-0.876-0.426-1.948s0.135-1.741 0.407-2.007c0.624-0.331 1.336-0.46 2.036-0.371h3.384zm-37.74-12.959c-1.176-0.741-3.278-1.108-6.303-1.101h-5.712v0.243l0.708 2.826h5.033c0.837-0.051 1.672 0.117 2.424 0.487 0.259 0.248 0.457 0.553 0.578 0.891 0.121 0.339 0.162 0.701 0.12 1.058v1.12h-5.556c-1.939 0-3.271 0.38-3.995 1.14s-1.099 2.127-1.125 4.102c0 2.154 0.359 3.06 1.086 3.742s2.133 1.188 4.344 1.188h6.846c1.717 0 3.346-0.808 3.346-2.747v-8.584c0-2.176-0.589-3.635-1.765-4.375zm-3.181 12.959h-3.219c-0.735 0.081-1.478-0.037-2.153-0.342-0.284-0.227-0.427-0.876-0.427-1.948s0.136-1.741 0.408-2.007c0.624-0.331 1.336-0.46 2.036-0.371h3.384z\" fill=\"#fff\"/></svg>';\n\nfunction Promo(plugin) {\n    this.plan = plugin.status.plan;\n    var container = plugin.getContainer();\n    this.element = dom.selectByClass(CLASSES.promo, container);\n}\n\nPromo.prototype.show = function() {\n    if (this.plan !== FREE_PLAN) {\n        return;\n    }\n    if (!this.element) {\n        return;\n    }\n    this.setStyles();\n    this.setHtml();\n};\n\nPromo.prototype.setStyles = function() {\n    this.element.style.display = \"block\";\n};\n\nPromo.prototype.setHtml = function() {\n    this.element.innerHTML =\n        '<a target=\"_blank\" tabindex=\"-1\" href=\"' +\n        LINK +\n        '\">' +\n        PREFIX +\n        IMAGE +\n        SUFFIX +\n        \"</a>\";\n};\n\nfunction show() {\n    new Promo(this).show();\n}\n\nnotificator.on(\"assignSuggestions\", show);\n\nSuggestions.defaultOptions = DEFAULT_OPTIONS;\n\nSuggestions.version = \"22.6.0\";\n\n$.Suggestions = Suggestions;\n\n// Create chainable jQuery plugin:\n$.fn.suggestions = function(options, args) {\n    // If function invoked without argument return\n    // instance of the first matched element:\n    if (arguments.length === 0) {\n        return this.first().data(DATA_ATTR_KEY);\n    }\n\n    return this.each(function() {\n        var inputElement = $(this),\n            instance = inputElement.data(DATA_ATTR_KEY);\n\n        if (typeof options === \"string\") {\n            if (instance && typeof instance[options] === \"function\") {\n                instance[options](args);\n            }\n        } else {\n            // If instance already exists, destroy it:\n            if (instance && instance.dispose) {\n                instance.dispose();\n            }\n            instance = new Suggestions(this, options);\n            inputElement.data(DATA_ATTR_KEY, instance);\n        }\n    });\n};\n\n})));\n"],"names":["$","hasOwnProperty","counter","lang_util","isArray","array","Array","isFunction","it","Object","prototype","toString","call","isEmptyObject","obj","keys","length","constructor","isPlainObject","undefined","nodeType","window","collection_util","compact","filter","el","each","callback","some","idx","key","value","intersect","array1","array2","result","indexOf","minus","makeArray","arrayLike","slice","minusWithPartialMatching","el2","start","func_util","delay","handler","setTimeout","object_util","areSame","self","a","b","same","i","assign","target","varArgs","apply","arguments","TypeError","to","index","nextSource","nextKey","clone","JSON","parse","stringify","copy","val","fieldsAreNotEmpty","fields","field","getDeepValue","name","path","split","step","shift","join","indexObjectsById","objectsArray","idField","indexField","KEYS","ENTER","ESC","TAB","SPACE","UP","DOWN","CLASSES","hint","mobile","nowrap","promo","selected","suggestion","subtext","subtext_inline","subtext_delimiter","subtext_label","removeConstraint","EVENT_NS","DATA_ATTR_KEY","WORD_DELIMITERS","WORD_PARTS_DELIMITERS","WORD_SPLITTER","RegExp","WORD_PARTS_SPLITTER","text_util","escapeHtml","str","map","html","ch","replace","escapeRegExChars","formatToken","token","toLowerCase","getWordExtractorRegExp","normalize","stopwords","padEnd","sourceString","targetLength","padString","String","repeat","cleanStr","words","lastWord","pop","goodWords","push","splitTokens","tokens","subtokens","concat","stringEncloses","str1","str2","tokenize","unformattableTokens","preferredTokens","otherTokens","withSubTokens","jqapi","Deferred","ajax","settings","extend","isJqObject","param","proxy","func","context","select","selector","supportsCors","support","cors","getDefaultType","getDefaultContentType","fixURLProtocol","url","location","protocol","addUrlParams","params","test","serialize","data","generateId","prefix","utils","reWordExtractor","arrayMinus","arrayMinusWithPartialMatching","arraysIntersection","compactObject","fieldsNotEmpty","indexBy","uniqueId","DEFAULT_OPTIONS","$helpers","autoSelectFirst","containerClass","count","deferRequestBy","enrichmentEnabled","formatResult","formatSelected","headers","initializeInterval","language","minChars","mobileWidth","noCache","noSuggestionsHint","onInvalidateSelection","onSearchComplete","noop","onSearchError","onSearchStart","onSelect","onSelectNothing","onSuggestionsFetch","paramName","preventBadQueries","requestMode","scrollOnFocus","serviceUrl","tabDisabled","timeout","triggerSelectOnBlur","triggerSelectOnEnter","triggerSelectOnSpace","type","sameParentChecker","preprocessFn","suggestions","parentValue","haveSameParent","_matchByWords","parentCheckerFn","query","queryTokens","matches","suggestedValue","suggestionWords","componentsUnderCityDistrict","_underCityDistrict","matchers","matchByNormalizedQuery","normalizedQuery","matchByWords","matchByWordsAddress","matchByFields","fieldValue","fieldWords","ADDRESS_STOPWORDS","ADDRESS_COMPONENTS","id","forBounds","forLocations","kladrFormat","digits","zeros","fiasType","ADDRESS_TYPE","urlSuffix","dataComponents","dataComponentsById","enrichmentMethod","enrichmentParams","locations","locations_boost","from_bound","to_bound","getEnrichmentQuery","unrestricted_value","geoEnabled","isDataComplete","this","bounds","composeValue","options","country","region","region_with_type","region_type","region_type_full","area","area_with_type","area_type","area_type_full","city","city_with_type","city_type","city_type_full","settelement","settlement_with_type","settlement_type","settlement","settlement_type_full","cityDistrict","city_district_with_type","city_district_type","city_district","city_district_type_full","street","street_with_type","street_type","street_type_full","house","stead_type","stead","house_type","block_type","block","flat","flat_type","postal_box","saveCityDistrict","excludeCityDistrict","city_district_fias_id","forEach","component","currentValue","unusedTokens","formattedHistoryValues","that","district","historyValues","history_values","findUnusedTokens","getFormattedHistoryValues","highlightMatches","wrapFormattedValue","own","copyDataComponents","classes","unused","values","formatted","historyValue","getSuggestionValue","instance","formattedValue","hasSameValues","restrict_value","getValueWithinConstraints","getValueWithinBounds","hasBeenEnriched","getUnrestrictedData","FIAS_COMPONENTS","FIAS_TYPE","planning_structure","planning_structure_with_type","planning_structure_type","planning_structure_type_full","valueStartsWith","NAME_TYPE","fieldNames","surname","patronymic","element","parts","part","innPartsLengths","LEGAL","INDIVIDUAL","chooseFormattedField","formattedMain","formattedAlt","rHasMatch","formattedField","main","alt","PARTY_TYPE","hid","formattedInnOGRN","formatResultInn","formattedFIO","address","isMobile","maxLength","innParts","formattedInn","inn","innPartsLength","rDigit","partLength","formattedPart","EMAIL_TYPE","isQueryRequestable","suggest_local","BANK_TYPE","bic","formattedBIC","Outward","types","NAME","ADDRESS","FIAS","PARTY","EMAIL","BANK","notificator","chains","on","method","get","serviceMethods","suggest","defaultParams","dataType","contentType","addTypeInUrl","status","findById","requestModes","userSelect","updateValue","Suggestions","badQueries","selectedIndex","intervalId","cachedResponse","enrichmentCache","currentRequest","inputPhase","fetchPhase","enrichPhase","onChangeTimeout","triggering","$wrapper","disabled","selection","$viewport","$body","document","body","setupElement","initializer","is","resolve","deferInitialization","done","initialize","createWrapper","notify","bindWindowEvents","setOptions","inferIsMobile","timer","events","enable","always","off","clearInterval","setInterval","isInitialized","state","dispose","reject","removeData","removeClass","unbindWindowEvents","removeWrapper","trigger","chainName","args","after","onMousedown","remove","e","preventDefault","cancelBlur","closest","one","$elements","add","floating","$container","contains","hide","scrollToTop","scrollTarget","animate","scrollTop","offset","top","suppliedOptions","option","available","disable","width","clearCache","clear","currentSelection","abortRequest","visible","isUnavailable","update","updateSuggestions","setSuggestion","checkValueBounds","all","kladr_id","getBoundedKladrId","fixData","fullQuery","extendedCurrentValue","resolver","selectSuggestion","fail","getSuggestions","parentInstance","getParentInstance","trim","getAjaxParams","custom","partner","serviceMethod","version","xhrFields","withCredentials","constructRequestParams","customParams","hookParams","isNumeric","assignSuggestions","requestOptions","response","noCallbacks","useEnrichmentCache","cacheKey","isBadQuery","doGetSuggestions","processResponse","enrichResponse","jqXHR","textStatus","errorThrown","request","q","abort","verifySuggestionsFormat","setUnrestrictedValues","selectionOptions","typeFormattedValue","hasSame","anotherSuggestion","shouldRestrictValues","constraints","shouldRestrict","label","getFirstConstraintLabel","areSuggestionsSame","getNoSuggestionsHint","methods","attr","addClass","css","bindElementEvents","onElementKeyDown","onElementKeyUp","onElementBlur","onElementFocus","unbindElementEvents","selectCurrentValue","noSpace","cancelFocus","completeOnFocus","which","isCursorAtEnd","continueSelecting","dontEnrich","proceedChangedValue","moveUp","moveDown","stopImmediatePropagation","triggerOnSelectNothing","clearTimeout","onValueChange","isElementFocused","setCursorAtEnd","activeElement","isElementDisabled","Boolean","getAttribute","selectionStart","range","valLength","ex","createRange","moveStart","text","selectionEnd","scrollLeft","scrollWidth","statusRequests","resetTokens","req","locationRequest","methods$1","checkStatus","requestKey","triggerError","search","plan","getResponseHeader","statusText","defaultGeoLocation","resetLocation","geoLocation","methods$2","checkLocation","providedLocation","resp","locationData","getGeoLocation","constructParams","promise","methods$3","enrichSuggestion","qc","disableDropdown","enableDropdown","enrichedSuggestion","chunks","chunk","matched","nowrapLinkedParts","formattedStr","nowrapClass","delimitedParts","hasAnotherSuggestion","s","optionsUsed","methods$4","createContainer","suggestionSelector","display","onSuggestionClick","showContainer","appendTo","getContainer","removeContainer","setContainerOptions","mousedownEvent","$el","dropdownDisabled","focus","isNaN","getSuggestionsItems","children","toggleDropdownEnabling","hasSuggestionsToChoose","buildSuggestionHtml","eq","beforeRender","show","ordinal","labels","makeSuggestionLabel","tokenMatchers","match","word","rWords","exec","hasUpperCase","matchable","inArray","j","matcher","tokenMatch","nextIndex","before","beforeText","beforeDelimiter","splice","substr","nameData","empty","activate","$activeItem","$children","deactivate","restoreValue","adjustScroll","itemTop","itemBottom","containerHeight","position","outerHeight","innerHeight","optionsUsed$1","fiasParamNames","belongsToArea","parentSuggestion","bound","getSignificantKladrId","significantKladrId","significantLength","ConstraintLocation","fiasFieldNames","fiasFields","specificity","fieldName","getFiasSpecificity","significantKladr","getKladrSpecificity","getLabel","getFields","isValid","kladrLength","containsData","Constraint","deletable","locationsArray","restrictions","methods$5","createConstraints","setupConstraints","$parent","unbindFromParent","bindToParent","_","constraint","addConstraint","filteredLocation","locationComponents","constructConstraintsParams","parentData","city_fias_id","constraints_id","onParentSelectionChanged","onParentDispose","valueChanged","shareWithParent","restrictedKeys","unrestrictedData","maxSpecificity","region_kladr_id","city_kladr_id","methods$6","proceedQuery","findSuggestionIndex","selectFoundSuggestion","onSelectComplete","newSelectionOptions","lastValue","assumeDataComplete","alwaysContinueSelecting","event","optionsUsed$2","methods$7","setupBounds","from","setBoundsOptions","boundIsOwn","boundsAvailable","newBounds","boundFrom","boundTo","boundsOwn","boundsAll","constructBoundsParams","valueData","components","boundsRange","dom","selectByClass","classname","parent","querySelector","className","list","setStyle","style","listenTo","eventName","namespace","addEventListener","eventsByNamespace","stopListeningNamespace","removeEventListener","FREE_PLAN","LINK","PREFIX","SUFFIX","IMAGE","Promo","plugin","container","setStyles","setHtml","innerHTML","defaultOptions","fn","first","inputElement","factory"],"sourceRoot":""}